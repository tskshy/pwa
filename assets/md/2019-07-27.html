
<!DOCTYPE html>
<html>
  <head>
    <title>no title</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style>
    .markdown-preview{width:100%;height:100%;box-sizing:border-box}.markdown-preview .pagebreak,.markdown-preview .newpage{page-break-before:always}.markdown-preview pre.line-numbers{position:relative;padding-left:3.8em;counter-reset:linenumber}.markdown-preview pre.line-numbers>code{position:relative}.markdown-preview pre.line-numbers .line-numbers-rows{position:absolute;pointer-events:none;top:1em;font-size:100%;left:0;width:3em;letter-spacing:-1px;border-right:1px solid #999;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.markdown-preview pre.line-numbers .line-numbers-rows>span{pointer-events:none;display:block;counter-increment:linenumber}.markdown-preview pre.line-numbers .line-numbers-rows>span:before{content:counter(linenumber);color:#999;display:block;padding-right:.8em;text-align:right}.markdown-preview .mathjax-exps .MathJax_Display{text-align:center !important}.markdown-preview:not([for="preview"]) .code-chunk .btn-group{display:none}.markdown-preview:not([for="preview"]) .code-chunk .status{display:none}.markdown-preview:not([for="preview"]) .code-chunk .output-div{margin-bottom:16px}.scrollbar-style::-webkit-scrollbar{width:8px}.scrollbar-style::-webkit-scrollbar-track{border-radius:10px;background-color:transparent}.scrollbar-style::-webkit-scrollbar-thumb{border-radius:5px;background-color:rgba(150,150,150,0.66);border:4px solid rgba(150,150,150,0.66);background-clip:content-box}html body[for="html-export"]:not([data-presentation-mode]){position:relative;width:100%;height:100%;top:0;left:0;margin:0;padding:0;overflow:auto}html body[for="html-export"]:not([data-presentation-mode]) .markdown-preview{position:relative;top:0}@media screen and (min-width:914px){html body[for="html-export"]:not([data-presentation-mode]) .markdown-preview{padding:2em calc(50% - 457px + 2em)}}@media screen and (max-width:914px){html body[for="html-export"]:not([data-presentation-mode]) .markdown-preview{padding:2em}}@media screen and (max-width:450px){html body[for="html-export"]:not([data-presentation-mode]) .markdown-preview{font-size:14px !important;padding:1em}}@media print{html body[for="html-export"]:not([data-presentation-mode]) #sidebar-toc-btn{display:none}}html body[for="html-export"]:not([data-presentation-mode]) #sidebar-toc-btn{position:fixed;bottom:8px;left:8px;font-size:28px;cursor:pointer;color:inherit;z-index:99;width:32px;text-align:center;opacity:.4}html body[for="html-export"]:not([data-presentation-mode])[html-show-sidebar-toc] #sidebar-toc-btn{opacity:1}html body[for="html-export"]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc{position:fixed;top:0;left:0;width:300px;height:100%;padding:32px 0 48px 0;font-size:14px;box-shadow:0 0 4px rgba(150,150,150,0.33);box-sizing:border-box;overflow:auto;background-color:inherit}html body[for="html-export"]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc::-webkit-scrollbar{width:8px}html body[for="html-export"]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc::-webkit-scrollbar-track{border-radius:10px;background-color:transparent}html body[for="html-export"]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc::-webkit-scrollbar-thumb{border-radius:5px;background-color:rgba(150,150,150,0.66);border:4px solid rgba(150,150,150,0.66);background-clip:content-box}html body[for="html-export"]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc a{text-decoration:none}html body[for="html-export"]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc ul{padding:0 1.6em;margin-top:.8em}html body[for="html-export"]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc li{margin-bottom:.8em}html body[for="html-export"]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc ul{list-style-type:none}html body[for="html-export"]:not([data-presentation-mode])[html-show-sidebar-toc] .markdown-preview{left:300px;width:calc(100% -  300px);padding:2em calc(50% - 457px -  150px);margin:0;box-sizing:border-box}@media screen and (max-width:1274px){html body[for="html-export"]:not([data-presentation-mode])[html-show-sidebar-toc] .markdown-preview{padding:2em}}@media screen and (max-width:450px){html body[for="html-export"]:not([data-presentation-mode])[html-show-sidebar-toc] .markdown-preview{width:100%}}html body[for="html-export"]:not([data-presentation-mode]):not([html-show-sidebar-toc]) .markdown-preview{left:50%;transform:translateX(-50%)}html body[for="html-export"]:not([data-presentation-mode]):not([html-show-sidebar-toc]) .md-sidebar-toc{display:none}/**
 * prism.js Github theme based on GitHub's theme.
 * @author Sam Clarke
 */
code[class*="language-"],
pre[class*="language-"] {
  color: #333;
  background: none;
  font-family: Consolas, "Liberation Mono", Menlo, Courier, monospace;
  text-align: left;
  white-space: pre;
  word-spacing: normal;
  word-break: normal;
  word-wrap: normal;
  line-height: 1.4;

  -moz-tab-size: 8;
  -o-tab-size: 8;
  tab-size: 8;

  -webkit-hyphens: none;
  -moz-hyphens: none;
  -ms-hyphens: none;
  hyphens: none;
}

/* Code blocks */
pre[class*="language-"] {
  padding: .8em;
  overflow: auto;
  /* border: 1px solid #ddd; */
  border-radius: 3px;
  /* background: #fff; */
  background: #f5f5f5;
}

/* Inline code */
:not(pre) > code[class*="language-"] {
  padding: .1em;
  border-radius: .3em;
  white-space: normal;
  background: #f5f5f5;
}

.token.comment,
.token.blockquote {
  color: #969896;
}

.token.cdata {
  color: #183691;
}

.token.doctype,
.token.punctuation,
.token.variable,
.token.macro.property {
  color: #333;
}

.token.operator,
.token.important,
.token.keyword,
.token.rule,
.token.builtin {
  color: #a71d5d;
}

.token.string,
.token.url,
.token.regex,
.token.attr-value {
  color: #183691;
}

.token.property,
.token.number,
.token.boolean,
.token.entity,
.token.atrule,
.token.constant,
.token.symbol,
.token.command,
.token.code {
  color: #0086b3;
}

.token.tag,
.token.selector,
.token.prolog {
  color: #63a35c;
}

.token.function,
.token.namespace,
.token.pseudo-element,
.token.class,
.token.class-name,
.token.pseudo-class,
.token.id,
.token.url-reference .token.variable,
.token.attr-name {
  color: #795da3;
}

.token.entity {
  cursor: help;
}

.token.title,
.token.title .token.punctuation {
  font-weight: bold;
  color: #1d3e81;
}

.token.list {
  color: #ed6a43;
}

.token.inserted {
  background-color: #eaffea;
  color: #55a532;
}

.token.deleted {
  background-color: #ffecec;
  color: #bd2c00;
}

.token.bold {
  font-weight: bold;
}

.token.italic {
  font-style: italic;
}


/* JSON */
.language-json .token.property {
  color: #183691;
}

.language-markup .token.tag .token.punctuation {
  color: #333;
}

/* CSS */
code.language-css,
.language-css .token.function {
  color: #0086b3;
}

/* YAML */
.language-yaml .token.atrule {
  color: #63a35c;
}

code.language-yaml {
  color: #183691;
}

/* Ruby */
.language-ruby .token.function {
  color: #333;
}

/* Markdown */
.language-markdown .token.url {
  color: #795da3;
}

/* Makefile */
.language-makefile .token.symbol {
  color: #795da3;
}

.language-makefile .token.variable {
  color: #183691;
}

.language-makefile .token.builtin {
  color: #0086b3;
}

/* Bash */
.language-bash .token.keyword {
  color: #0086b3;
}

/* highlight */
pre[data-line] {
  position: relative;
  padding: 1em 0 1em 3em;
}
pre[data-line] .line-highlight-wrapper {
  position: absolute;
  top: 0;
  left: 0;
  background-color: transparent;
  display: block;
  width: 100%;
}

pre[data-line] .line-highlight {
  position: absolute;
  left: 0;
  right: 0;
  padding: inherit 0;
  margin-top: 1em;
  background: hsla(24, 20%, 50%,.08);
  background: linear-gradient(to right, hsla(24, 20%, 50%,.1) 70%, hsla(24, 20%, 50%,0));
  pointer-events: none;
  line-height: inherit;
  white-space: pre;
}

pre[data-line] .line-highlight:before, 
pre[data-line] .line-highlight[data-end]:after {
  content: attr(data-start);
  position: absolute;
  top: .4em;
  left: .6em;
  min-width: 1em;
  padding: 0 .5em;
  background-color: hsla(24, 20%, 50%,.4);
  color: hsl(24, 20%, 95%);
  font: bold 65%/1.5 sans-serif;
  text-align: center;
  vertical-align: .3em;
  border-radius: 999px;
  text-shadow: none;
  box-shadow: 0 1px white;
}

pre[data-line] .line-highlight[data-end]:after {
  content: attr(data-end);
  top: auto;
  bottom: .4em;
}.emoji {
  height: 0.8em;
}html body{font-family:"Helvetica Neue",Helvetica,"Segoe UI",Arial,freesans,sans-serif;font-size:16px;line-height:1.6;color:#333;background-color:#fff;overflow:initial;box-sizing:border-box;word-wrap:break-word}html body>:first-child{margin-top:0}html body h1,html body h2,html body h3,html body h4,html body h5,html body h6{line-height:1.2;margin-top:1em;margin-bottom:16px;color:#000}html body h1{font-size:2.25em;font-weight:300;padding-bottom:.3em}html body h2{font-size:1.75em;font-weight:400;padding-bottom:.3em}html body h3{font-size:1.5em;font-weight:500}html body h4{font-size:1.25em;font-weight:600}html body h5{font-size:1.1em;font-weight:600}html body h6{font-size:1em;font-weight:600}html body h1,html body h2,html body h3,html body h4,html body h5{font-weight:600}html body h5{font-size:1em}html body h6{color:#5c5c5c}html body strong{color:#000}html body del{color:#5c5c5c}html body a:not([href]){color:inherit;text-decoration:none}html body a{color:#08c;text-decoration:none}html body a:hover{color:#00a3f5;text-decoration:none}html body img{max-width:100%}html body>p{margin-top:0;margin-bottom:16px;word-wrap:break-word}html body>ul,html body>ol{margin-bottom:16px}html body ul,html body ol{padding-left:2em}html body ul.no-list,html body ol.no-list{padding:0;list-style-type:none}html body ul ul,html body ul ol,html body ol ol,html body ol ul{margin-top:0;margin-bottom:0}html body li{margin-bottom:0}html body li.task-list-item{list-style:none}html body li>p{margin-top:0;margin-bottom:0}html body .task-list-item-checkbox{margin:0 .2em .25em -1.8em;vertical-align:middle}html body .task-list-item-checkbox:hover{cursor:pointer}html body blockquote{margin:16px 0;font-size:inherit;padding:0 15px;color:#5c5c5c;border-left:4px solid #d6d6d6}html body blockquote>:first-child{margin-top:0}html body blockquote>:last-child{margin-bottom:0}html body hr{height:4px;margin:32px 0;background-color:#d6d6d6;border:0 none}html body table{margin:10px 0 15px 0;border-collapse:collapse;border-spacing:0;display:block;width:100%;overflow:auto;word-break:normal;word-break:keep-all}html body table th{font-weight:bold;color:#000}html body table td,html body table th{border:1px solid #d6d6d6;padding:6px 13px}html body dl{padding:0}html body dl dt{padding:0;margin-top:16px;font-size:1em;font-style:italic;font-weight:bold}html body dl dd{padding:0 16px;margin-bottom:16px}html body code{font-family:Menlo,Monaco,Consolas,'Courier New',monospace;font-size:.85em !important;color:#000;background-color:#f0f0f0;border-radius:3px;padding:.2em 0}html body code::before,html body code::after{letter-spacing:-0.2em;content:"\00a0"}html body pre>code{padding:0;margin:0;font-size:.85em !important;word-break:normal;white-space:pre;background:transparent;border:0}html body .highlight{margin-bottom:16px}html body .highlight pre,html body pre{padding:1em;overflow:auto;font-size:.85em !important;line-height:1.45;border:#d6d6d6;border-radius:3px}html body .highlight pre{margin-bottom:0;word-break:normal}html body pre code,html body pre tt{display:inline;max-width:initial;padding:0;margin:0;overflow:initial;line-height:inherit;word-wrap:normal;background-color:transparent;border:0}html body pre code:before,html body pre tt:before,html body pre code:after,html body pre tt:after{content:normal}html body p,html body blockquote,html body ul,html body ol,html body dl,html body pre{margin-top:0;margin-bottom:16px}html body kbd{color:#000;border:1px solid #d6d6d6;border-bottom:2px solid #c7c7c7;padding:2px 4px;background-color:#f0f0f0;border-radius:3px}@media print{html body{background-color:#fff}html body h1,html body h2,html body h3,html body h4,html body h5,html body h6{color:#000;page-break-after:avoid}html body blockquote{color:#5c5c5c}html body pre{page-break-inside:avoid}html body table{display:table}html body img{display:block;max-width:100%;max-height:100%}html body pre,html body code{word-wrap:break-word;white-space:pre}}
    /* Please visit the URL below for more information: */
/*   https://shd101wyy.github.io/markdown-preview-enhanced/#/customize-css */

    </style>
    
  </head>
  <body for="html-export">
    <div class="mume markdown-preview">
    <html><head></head><body><div><ul>
<li><a href="#linux%E8%99%9A%E6%8B%9F%E7%BD%91%E7%BB%9C%E8%AE%BE%E5%A4%87%E4%B9%8Bveth-pairbridge">Linux&#x865A;&#x62DF;&#x7F51;&#x7EDC;&#x8BBE;&#x5907;&#x4E4B;veth-pair/bridge</a>
<ul>
<li><a href="#%E4%BB%80%E4%B9%88%E6%98%AFveth-pair">&#x4EC0;&#x4E48;&#x662F;veth-pair</a>
<ul>
<li><a href="#veth%E7%9A%84%E7%89%B9%E7%82%B9">veth&#x7684;&#x7279;&#x70B9;</a></li>
<li><a href="#%E7%A4%BA%E4%BE%8B">&#x793A;&#x4F8B;</a></li>
</ul>
</li>
<li><a href="#%E4%BB%80%E4%B9%88%E6%98%AFbridge">&#x4EC0;&#x4E48;&#x662F;bridge</a>
<ul>
<li><a href="#%E5%88%9B%E5%BB%BAbridge">&#x521B;&#x5EFA;bridge</a></li>
<li><a href="#%E5%88%9B%E5%BB%BAveth%E8%AE%BE%E5%A4%87%E4%B8%8Ebridge%E8%AE%BE%E5%A4%87%E7%9B%B8%E8%BF%9E">&#x521B;&#x5EFA;veth&#x8BBE;&#x5907;&#xFF0C;&#x4E0E;bridge&#x8BBE;&#x5907;&#x76F8;&#x8FDE;</a></li>
<li><a href="#%E7%BB%99bridge%E9%85%8D%E7%BD%AEip">&#x7ED9;bridge&#x914D;&#x7F6E;IP</a></li>
<li><a href="#bridge%E5%BF%85%E9%A1%BB%E8%A6%81%E9%85%8D%E7%BD%AEip%E5%90%97">bridge&#x5FC5;&#x987B;&#x8981;&#x914D;&#x7F6E;IP&#x5417;</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<h1 class="mume-header" id="linux%E8%99%9A%E6%8B%9F%E7%BD%91%E7%BB%9C%E8%AE%BE%E5%A4%87%E4%B9%8Bveth-pairbridge" ebook-toc-level-1 heading="Linux&amp;#x865A;&amp;#x62DF;&amp;#x7F51;&amp;#x7EDC;&amp;#x8BBE;&amp;#x5907;&amp;#x4E4B;veth-pair/bridge">Linux&#x865A;&#x62DF;&#x7F51;&#x7EDC;&#x8BBE;&#x5907;&#x4E4B;veth-pair/bridge</h1>

<blockquote>
<p>&#x672C;&#x6587;&#x6240;&#x6709;&#x7684;&#x64CD;&#x4F5C;&#x90FD;&#x662F;&#x5728;docker&#x4E0A;&#x8FDB;&#x884C;&#x7684;&#xFF0C;&#x542F;&#x52A8;&#x5BB9;&#x5668;&#x65F6;&#x6CE8;&#x610F;&#x8D4B;&#x4E88;&#x5BF9;&#x5E94;&#x7684;&#x6743;&#x9650;&#xFF0C;--privileged</p>
</blockquote>
<h2 class="mume-header" id="%E4%BB%80%E4%B9%88%E6%98%AFveth-pair" ebook-toc-level-2 heading="&amp;#x4EC0;&amp;#x4E48;&amp;#x662F;veth-pair">&#x4EC0;&#x4E48;&#x662F;veth-pair</h2>

<p>&#x987E;&#x540D;&#x601D;&#x4E49;&#xFF0C;<code>veth-pair</code>&#x5C31;&#x662F;&#x4E00;&#x5BF9;&#x7684;&#x865A;&#x62DF;&#x8BBE;&#x5907;&#x63A5;&#x53E3;&#xFF0C;&#x5B83;&#x90FD;&#x662F;&#x6210;&#x5BF9;&#x51FA;&#x73B0;&#x7684;&#x3002;&#x4E00;&#x7AEF;&#x8FDE;&#x7740;&#x534F;&#x8BAE;&#x6808;&#xFF0C;&#x4E00;&#x7AEF;&#x5F7C;&#x6B64;&#x76F8;&#x8FDE;&#x7740;&#x3002;</p>
<p>&#x6B63;&#x56E0;&#x4E3A;&#x6709;&#x8FD9;&#x4E2A;&#x7279;&#x6027;&#xFF0C;&#x5B83;&#x5E38;&#x5E38;&#x5145;&#x5F53;&#x7740;&#x4E00;&#x4E2A;&#x6865;&#x6881;&#xFF0C;&#x8FDE;&#x63A5;&#x7740;&#x5404;&#x79CD;&#x865A;&#x62DF;&#x7F51;&#x7EDC;&#x8BBE;&#x5907;&#xFF0C;&#x5178;&#x578B;&#x7684;&#x4F8B;&#x5B50;&#x50CF;&#x201C;&#x4E24;&#x4E2A; namespace &#x4E4B;&#x95F4;&#x7684;&#x8FDE;&#x63A5;&#x201D;&#xFF0C;&#x201C;Bridge&#x3001;OVS &#x4E4B;&#x95F4;&#x7684;&#x8FDE;&#x63A5;&#x201D;&#xFF0C;&#x201C;Docker &#x5BB9;&#x5668;&#x4E4B;&#x95F4;&#x7684;&#x8FDE;&#x63A5;&#x201D; &#x7B49;&#x7B49;</p>
<h3 class="mume-header" id="veth%E7%9A%84%E7%89%B9%E7%82%B9" ebook-toc-level-3 heading="veth&amp;#x7684;&amp;#x7279;&amp;#x70B9;">veth&#x7684;&#x7279;&#x70B9;</h3>

<ul>
<li>veth&#x548C;&#x5176;&#x5B83;&#x7684;&#x7F51;&#x7EDC;&#x8BBE;&#x5907;&#x90FD;&#x4E00;&#x6837;&#xFF0C;&#x4E00;&#x7AEF;&#x8FDE;&#x63A5;&#x7684;&#x662F;&#x5185;&#x6838;&#x534F;&#x8BAE;&#x6808;&#x3002;</li>
<li>veth&#x8BBE;&#x5907;&#x662F;&#x6210;&#x5BF9;&#x51FA;&#x73B0;&#x7684;&#xFF0C;&#x53E6;&#x4E00;&#x7AEF;&#x4E24;&#x4E2A;&#x8BBE;&#x5907;&#x5F7C;&#x6B64;&#x76F8;&#x8FDE;</li>
<li>&#x4E00;&#x4E2A;&#x8BBE;&#x5907;&#x6536;&#x5230;&#x534F;&#x8BAE;&#x6808;&#x7684;&#x6570;&#x636E;&#x53D1;&#x9001;&#x8BF7;&#x6C42;&#x540E;&#xFF0C;&#x4F1A;&#x5C06;&#x6570;&#x636E;&#x53D1;&#x9001;&#x5230;&#x53E6;&#x4E00;&#x4E2A;&#x8BBE;&#x5907;&#x4E0A;&#x53BB;&#x3002;</li>
</ul>
<p>&#x4E0B;&#x9762;&#x5148;&#x7ED9;&#x4E00;&#x5F20;veth&#x7684;&#x5173;&#x7CFB;&#x56FE;&#xFF0C;&#x540E;&#x7EED;&#x901A;&#x8FC7;&#x5B9E;&#x9645;&#x64CD;&#x4F5C;&#x5B9E;&#x73B0;veth&#xFF1A;</p>
<p><!--?xml version="1.0" encoding="UTF-8" standalone="no"?-->

<!-- Generated by graphviz version 2.40.1 (20161225.0304)
 -->
<!-- Title: G Pages: 1 -->
<svg width="436pt" height="165pt" viewBox="0.00 0.00 435.82 164.80" xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 160.8)">
<title>G</title>
<polygon fill="#ffffff" stroke="transparent" points="-4,4 -4,-160.8 431.8214,-160.8 431.8214,4 -4,4"/>
<g id="clust1" class="cluster">
<title>cluster0</title>
<polygon fill="none" stroke="#000000" points="8,-8 8,-148.8 318,-148.8 318,-8 8,-8"/>
</g>
<g id="clust2" class="cluster">
<title>cluster1</title>
<polygon fill="none" stroke="#000000" points="109,-88.8 109,-140.8 257,-140.8 257,-88.8 109,-88.8"/>
</g>
<g id="clust4" class="cluster">
<title>cluster2</title>
<polygon fill="none" stroke="#000000" points="16,-16 16,-68.8 310,-68.8 310,-16 16,-16"/>
</g>
<!-- nps -->
<g id="node1" class="node">
<title>nps</title>
<polygon fill="#c0c0c0" stroke="#c0c0c0" points="248.8036,-132.8 117.1964,-132.8 117.1964,-96.8 248.8036,-96.8 248.8036,-132.8"/>
<text text-anchor="middle" x="183" y="-111.2" font-family="Times,serif" font-size="12.00" fill="#000000">Network Protocol Stack</text>
</g>
<!-- eth0 -->
<g id="node2" class="node">
<title>eth0</title>
<polygon fill="#c0c0c0" stroke="#c0c0c0" points="302,-60.4 248,-60.4 248,-24.4 302,-24.4 302,-60.4"/>
<text text-anchor="middle" x="275" y="-38.8" font-family="Times,serif" font-size="12.00" fill="#000000">eth0</text>
</g>
<!-- nps&#45;&gt;eth0 -->
<g id="edge1" class="edge">
<title>nps-&gt;eth0</title>
<path fill="none" stroke="#000000" d="M214.1142,-90.3145C223.8361,-82.6637 234.5524,-74.2305 244.2493,-66.5995"/>
<polygon fill="#000000" stroke="#000000" points="206.2155,-96.5304 211.291,-86.8098 210.1447,-93.4383 214.0739,-90.3461 214.0739,-90.3461 214.0739,-90.3461 210.1447,-93.4383 216.8569,-93.8824 206.2155,-96.5304 206.2155,-96.5304"/>
<polygon fill="#000000" stroke="#000000" points="252.1106,-60.4129 247.0351,-70.1335 248.1814,-63.5051 244.2522,-66.5972 244.2522,-66.5972 244.2522,-66.5972 248.1814,-63.5051 241.4693,-63.0609 252.1106,-60.4129 252.1106,-60.4129"/>
</g>
<!-- veth0 -->
<g id="node3" class="node">
<title>veth0</title>
<polygon fill="#c0c0c0" stroke="#c0c0c0" points="118.3354,-60.7005 23.6646,-60.7005 23.6646,-24.0995 118.3354,-24.0995 118.3354,-60.7005"/>
<text text-anchor="middle" x="71" y="-46" font-family="Times,serif" font-size="12.00" fill="#000000">192.168.1.10/24</text>
<text text-anchor="middle" x="71" y="-31.6" font-family="Times,serif" font-size="12.00" fill="#000000">veth0</text>
</g>
<!-- nps&#45;&gt;veth0 -->
<g id="edge2" class="edge">
<title>nps-&gt;veth0</title>
<path fill="none" stroke="#000000" d="M146.3381,-91.1007C134.0637,-83.1662 120.3762,-74.3182 108.0707,-66.3636"/>
<polygon fill="#000000" stroke="#000000" points="155.0266,-96.7172 144.1855,-95.0675 150.8275,-94.0028 146.6285,-91.2884 146.6285,-91.2884 146.6285,-91.2884 150.8275,-94.0028 149.0714,-87.5092 155.0266,-96.7172 155.0266,-96.7172"/>
<polygon fill="#000000" stroke="#000000" points="99.3947,-60.7551 110.2358,-62.4048 103.5937,-63.4695 107.7928,-66.1839 107.7928,-66.1839 107.7928,-66.1839 103.5937,-63.4695 105.3498,-69.9631 99.3947,-60.7551 99.3947,-60.7551"/>
</g>
<!-- veth1 -->
<g id="node4" class="node">
<title>veth1</title>
<polygon fill="#c0c0c0" stroke="#c0c0c0" points="230.3354,-60.7005 135.6646,-60.7005 135.6646,-24.0995 230.3354,-24.0995 230.3354,-60.7005"/>
<text text-anchor="middle" x="183" y="-46" font-family="Times,serif" font-size="12.00" fill="#000000">192.168.1.11/24</text>
<text text-anchor="middle" x="183" y="-31.6" font-family="Times,serif" font-size="12.00" fill="#000000">veth1</text>
</g>
<!-- nps&#45;&gt;veth1 -->
<g id="edge3" class="edge">
<title>nps-&gt;veth1</title>
<path fill="none" stroke="#000000" d="M183,-86.4981C183,-81.3964 183,-76.0748 183,-70.9656"/>
<polygon fill="#000000" stroke="#000000" points="183,-96.5304 178.5001,-86.5304 183,-91.5304 183.0001,-86.5304 183.0001,-86.5304 183.0001,-86.5304 183,-91.5304 187.5001,-86.5305 183,-96.5304 183,-96.5304"/>
<polygon fill="#000000" stroke="#000000" points="183,-60.9156 187.5001,-70.9155 183,-65.9156 183.0001,-70.9156 183.0001,-70.9156 183.0001,-70.9156 183,-65.9156 178.5001,-70.9156 183,-60.9156 183,-60.9156"/>
</g>
<!-- veth0&#45;&gt;veth1 -->
<g id="edge4" class="edge">
<title>veth0-&gt;veth1</title>
<path fill="none" stroke="#000000" d="M128.3395,-42.4C128.4929,-42.4 128.6463,-42.4 128.7997,-42.4"/>
<polygon fill="#000000" stroke="#000000" points="118.25,-42.4 128.25,-37.9001 123.25,-42.4 128.25,-42.4001 128.25,-42.4001 128.25,-42.4001 123.25,-42.4 128.25,-46.9001 118.25,-42.4 118.25,-42.4"/>
<polygon fill="#000000" stroke="#000000" points="135.7021,-42.4 125.7022,-46.9001 130.7021,-42.4001 125.7021,-42.4001 125.7021,-42.4001 125.7021,-42.4001 130.7021,-42.4001 125.7021,-37.9001 135.7021,-42.4 135.7021,-42.4"/>
</g>
<!-- pn -->
<g id="node5" class="node">
<title>pn</title>
<polygon fill="#c0c0c0" stroke="#c0c0c0" points="427.6434,-132.8 326.3566,-132.8 326.3566,-96.8 427.6434,-96.8 427.6434,-132.8"/>
<text text-anchor="middle" x="377" y="-111.2" font-family="Times,serif" font-size="12.00" fill="#000000">Physical Network</text>
</g>
<!-- pn&#45;&gt;eth0 -->
<g id="edge5" class="edge">
<title>pn-&gt;eth0</title>
<path fill="none" stroke="#000000" d="M343.1559,-90.7773C332.0716,-82.9097 319.7636,-74.1733 308.6906,-66.3137"/>
<polygon fill="#000000" stroke="#000000" points="351.5242,-96.7172 340.7649,-94.5986 347.4469,-93.8231 343.3696,-90.929 343.3696,-90.929 343.3696,-90.929 347.4469,-93.8231 345.9743,-87.2594 351.5242,-96.7172 351.5242,-96.7172"/>
<polygon fill="#000000" stroke="#000000" points="300.5045,-60.5032 311.2638,-62.6218 304.5818,-63.3973 308.6591,-66.2914 308.6591,-66.2914 308.6591,-66.2914 304.5818,-63.3973 306.0544,-69.961 300.5045,-60.5032 300.5045,-60.5032"/>
</g>
</g>
</svg>
</p><h3 class="mume-header" id="%E7%A4%BA%E4%BE%8B" ebook-toc-level-3 heading="&amp;#x793A;&amp;#x4F8B;">&#x793A;&#x4F8B;</h3>

<p>&#x521B;&#x5EFA;veth&#x5BF9;veth0/veth1&#xFF0C;&#x5148;&#x53EA;&#x7ED9;veth0&#x914D;&#x7F6E;IP&#xFF0C;&#x7ED9;veth1&#x52A0;&#x5165;ns1&#xFF0C;&#x7136;&#x540E;&#x5C06;&#x4E24;&#x4E2A;&#x8BBE;&#x5907;&#x542F;&#x52A8;</p>
<pre data-role="codeBlock" data-info="bash" class="language-bash">$ <span class="token function">ip</span> <span class="token function">link</span> add veth0 <span class="token function">type</span> veth peer name veth1
$ <span class="token function">ip</span> addr add 192.168.1.10/24 dev veth0
$ <span class="token function">ip</span> <span class="token function">link</span> <span class="token keyword">set</span> veth0 up

$ <span class="token function">ip</span> netns add ns1
$ <span class="token function">ip</span> <span class="token function">link</span> <span class="token keyword">set</span> dev veth1 netns ns1
$ <span class="token function">ip</span> netns <span class="token function">exec</span> ns1 <span class="token function">ip</span> <span class="token function">link</span> <span class="token keyword">set</span> veth1 up
</pre><p>&#x5148;ping&#x4E00;&#x4E0B;192.168.1.11&#xFF0C;&#x7531;&#x4E8E;veth1&#x65E0;ip&#xFF0C;&#x6240;&#x4EE5;&#x80AF;&#x5B9A;&#x4E0D;&#x901A;&#x3002;</p>
<pre data-role="codeBlock" data-info="bash" class="language-bash">$ <span class="token function">ping</span> -c 4 192.168.1.11
PING 192.168.1.11 <span class="token punctuation">(</span>192.168.1.11<span class="token punctuation">)</span> 56<span class="token punctuation">(</span>84<span class="token punctuation">)</span> bytes of data.
From 192.168.1.10 icmp_seq<span class="token operator">=</span>1 Destination Host Unreachable
From 192.168.1.10 icmp_seq<span class="token operator">=</span>2 Destination Host Unreachable
From 192.168.1.10 icmp_seq<span class="token operator">=</span>3 Destination Host Unreachable
From 192.168.1.10 icmp_seq<span class="token operator">=</span>4 Destination Host Unreachable

--- 192.168.1.11 <span class="token function">ping</span> statistics ---
4 packets transmitted, 0 received, +4 errors, 100% packet loss, <span class="token function">time</span> 155ms
pipe 4
</pre><p>&#x518D;&#x6293;&#x5305;&#x770B;&#x770B;veth0&#x548C;veth1&#x7684;&#x60C5;&#x51B5;&#xFF1A;</p>
<pre data-role="codeBlock" data-info="bash" class="language-bash">$ tcpdump -n -i veth0
tcpdump: verbose output suppressed, use -v or -vv <span class="token keyword">for</span> full protocol decode
listening on veth0, link-type EN10MB <span class="token punctuation">(</span>Ethernet<span class="token punctuation">)</span>, capture size 262144 bytes
03:41:46.312013 ARP, Request who-has 192.168.1.11 tell 192.168.1.10, length 28
03:41:47.384095 ARP, Request who-has 192.168.1.11 tell 192.168.1.10, length 28
03:41:48.427118 ARP, Request who-has 192.168.1.11 tell 192.168.1.10, length 28
03:41:49.464310 ARP, Request who-has 192.168.1.11 tell 192.168.1.10, length 28
03:41:50.505492 ARP, Request who-has 192.168.1.11 tell 192.168.1.10, length 28
03:41:51.545235 ARP, Request who-has 192.168.1.11 tell 192.168.1.10, length 28

$ <span class="token function">ip</span> netns <span class="token function">exec</span> ns1 <span class="token function">bash</span>
$ tcpdump -n -i veth1
tcpdump: verbose output suppressed, use -v or -vv <span class="token keyword">for</span> full protocol decode
listening on veth1, link-type EN10MB <span class="token punctuation">(</span>Ethernet<span class="token punctuation">)</span>, capture size 262144 bytes
03:41:46.312046 ARP, Request who-has 192.168.1.11 tell 192.168.1.10, length 28
03:41:47.384130 ARP, Request who-has 192.168.1.11 tell 192.168.1.10, length 28
03:41:48.427157 ARP, Request who-has 192.168.1.11 tell 192.168.1.10, length 28
03:41:49.464342 ARP, Request who-has 192.168.1.11 tell 192.168.1.10, length 28
03:41:50.505530 ARP, Request who-has 192.168.1.11 tell 192.168.1.10, length 28
03:41:51.545272 ARP, Request who-has 192.168.1.11 tell 192.168.1.10, length 28
</pre><p>&#x4ECE;&#x4E0A;&#x9762;&#x7684;&#x8F93;&#x51FA;&#x770B;&#x51FA;&#xFF0C;veth0&#xFF0C;veth1&#x6536;&#x5230;&#x4E86;&#x540C;&#x6837;&#x7684;arp&#x8BF7;&#x6C42;&#xFF0C;&#x4F46;&#x662F;&#x6CA1;&#x6709;arp&#x5E94;&#x7B54;&#x5305;&#xFF0C;&#x4E4B;&#x6240;&#x4EE5;&#x4F1A;&#x8FD9;&#x6837;&#xFF0C;&#x662F;&#x56E0;&#x4E3A;&#xFF1A;</p>
<ul>
<li>ping&#x8FDB;&#x7A0B;&#x6784;&#x9020;ICMP echo&#x8BF7;&#x6C42;&#x5305;&#xFF0C;&#x5E76;&#x901A;&#x8FC7;socket&#x53D1;&#x7ED9;&#x534F;&#x8BAE;&#x6808;&#xFF0C;<br>
&#x534F;&#x8BAE;&#x6808;&#x6839;&#x636E;&#x76EE;&#x7684;IP&#x5730;&#x5740;&#x548C;&#x7CFB;&#x7EDF;&#x8DEF;&#x7531;&#x8868;&#xFF0C;&#x77E5;&#x9053;&#x53BB;192.168.1.11&#x7684;&#x6570;&#x636E;&#x5305;&#x5E94;&#x8BE5;&#x8981;&#x7531;192.168.1.10&#x53E3;&#x51FA;&#x53BB;</li>
<li>&#x7531;&#x4E8E;&#x662F;&#x7B2C;&#x4E00;&#x6B21;&#x8BBF;&#x95EE;192.168.1.11&#xFF0C;&#x4E14;&#x76EE;&#x7684;IP&#x548C;&#x672C;&#x5730;IP&#x5728;&#x540C;&#x4E00;&#x4E2A;&#x7F51;&#x6BB5;&#xFF0C;&#x6240;&#x4EE5;&#x534F;&#x8BAE;&#x6808;&#x4F1A;&#x5148;&#x53D1;&#x9001;ARP&#x51FA;&#x53BB;&#xFF0C;&#x8BE2;&#x95EE;192.168.1.11&#x7684;mac&#x5730;&#x5740;</li>
<li>&#x534F;&#x8BAE;&#x6808;&#x5C06;ARP&#x5305;&#x4EA4;&#x7ED9;veth0&#xFF0C;&#x8BA9;&#x5B83;&#x53D1;&#x51FA;&#x53BB;</li>
<li>&#x7531;&#x4E8E;veth0&#x7684;&#x53E6;&#x4E00;&#x7AEF;&#x8FDE;&#x7684;&#x662F;veth1&#xFF0C;&#x6240;&#x4EE5;ARP&#x8BF7;&#x6C42;&#x5305;&#x5C31;&#x8F6C;&#x53D1;&#x7ED9;&#x4E86;veth1</li>
<li>veth1&#x6536;&#x5230;ARP&#x5305;&#x540E;&#xFF0C;&#x8F6C;&#x4EA4;&#x7ED9;&#x53E6;&#x4E00;&#x7AEF;&#x7684;&#x534F;&#x8BAE;&#x6808;</li>
<li>&#x534F;&#x8BAE;&#x6808;&#x4E00;&#x770B;&#x81EA;&#x5DF1;&#x7684;&#x8BBE;&#x5907;&#x5217;&#x8868;&#xFF0C;&#x53D1;&#x73B0;&#x672C;&#x5730;&#x6CA1;&#x6709;192.168.1.11&#x8FD9;&#x4E2A;IP&#xFF0C;&#x4E8E;&#x662F;&#x5C31;&#x4E22;&#x5F03;&#x4E86;&#x8BE5;ARP&#x8BF7;&#x6C42;&#x5305;&#xFF0C;&#x8FD9;&#x5C31;&#x662F;&#x4E3A;&#x4EC0;&#x4E48;&#x53EA;&#x80FD;&#x770B;&#x5230;ARP&#x8BF7;&#x6C42;&#x5305;&#xFF0C;&#x770B;&#x4E0D;&#x5230;&#x5E94;&#x7B54;&#x5305;&#x7684;&#x539F;&#x56E0;</li>
</ul>
<p>&#x73B0;&#x5728;&#x7ED9;veth1&#x914D;&#x7F6E;&#x4E0A;IP:192.168.1.11/24</p>
<pre data-role="codeBlock" data-info="bash" class="language-bash">$ <span class="token function">ip</span> netns <span class="token function">exec</span> ns1 <span class="token function">ip</span> addr add 192.168.1.11/24 dev veth1
</pre><p>&#x7136;&#x540E;&#x518D;ping 192.168.1.11&#xFF0C;&#x6210;&#x529F;&#xFF0C;&#x4E0B;&#x9762;&#x662F;&#x6293;&#x5305;&#x60C5;&#x51B5;</p>
<pre data-role="codeBlock" data-info="bash" class="language-bash">$ <span class="token function">ping</span> -c 4 192.168.1.11 -I veth0
PING 192.168.1.11 <span class="token punctuation">(</span>192.168.1.11<span class="token punctuation">)</span> from 192.168.1.10 veth0: 56<span class="token punctuation">(</span>84<span class="token punctuation">)</span> bytes of data.
64 bytes from 192.168.1.11: icmp_seq<span class="token operator">=</span>1 ttl<span class="token operator">=</span>64 time<span class="token operator">=</span>0.111 ms
64 bytes from 192.168.1.11: icmp_seq<span class="token operator">=</span>2 ttl<span class="token operator">=</span>64 time<span class="token operator">=</span>0.069 ms
64 bytes from 192.168.1.11: icmp_seq<span class="token operator">=</span>3 ttl<span class="token operator">=</span>64 time<span class="token operator">=</span>0.067 ms
64 bytes from 192.168.1.11: icmp_seq<span class="token operator">=</span>4 ttl<span class="token operator">=</span>64 time<span class="token operator">=</span>0.073 ms

--- 192.168.1.11 <span class="token function">ping</span> statistics ---
4 packets transmitted, 4 received, 0% packet loss, <span class="token function">time</span> 102ms
rtt min/avg/max/mdev <span class="token operator">=</span> 0.067/0.080/0.111/0.018 ms


$ tcpdump -n -i veth0
tcpdump: verbose output suppressed, use -v or -vv <span class="token keyword">for</span> full protocol decode
listening on veth0, link-type EN10MB <span class="token punctuation">(</span>Ethernet<span class="token punctuation">)</span>, capture size 262144 bytes
04:42:43.877424 IP 192.168.1.10 <span class="token operator">&gt;</span> 192.168.1.11: ICMP <span class="token keyword">echo</span> request, <span class="token function">id</span> 96, <span class="token function">seq</span> 1, length 64
04:42:43.877468 IP 192.168.1.11 <span class="token operator">&gt;</span> 192.168.1.10: ICMP <span class="token keyword">echo</span> reply, <span class="token function">id</span> 96, <span class="token function">seq</span> 1, length 64
04:42:44.897628 IP 192.168.1.10 <span class="token operator">&gt;</span> 192.168.1.11: ICMP <span class="token keyword">echo</span> request, <span class="token function">id</span> 96, <span class="token function">seq</span> 2, length 64
04:42:44.897688 IP 192.168.1.11 <span class="token operator">&gt;</span> 192.168.1.10: ICMP <span class="token keyword">echo</span> reply, <span class="token function">id</span> 96, <span class="token function">seq</span> 2, length 64
04:42:45.937207 IP 192.168.1.10 <span class="token operator">&gt;</span> 192.168.1.11: ICMP <span class="token keyword">echo</span> request, <span class="token function">id</span> 96, <span class="token function">seq</span> 3, length 64
04:42:45.937270 IP 192.168.1.11 <span class="token operator">&gt;</span> 192.168.1.10: ICMP <span class="token keyword">echo</span> reply, <span class="token function">id</span> 96, <span class="token function">seq</span> 3, length 64
04:42:46.978887 IP 192.168.1.10 <span class="token operator">&gt;</span> 192.168.1.11: ICMP <span class="token keyword">echo</span> request, <span class="token function">id</span> 96, <span class="token function">seq</span> 4, length 64
04:42:46.978948 IP 192.168.1.11 <span class="token operator">&gt;</span> 192.168.1.10: ICMP <span class="token keyword">echo</span> reply, <span class="token function">id</span> 96, <span class="token function">seq</span> 4, length 64
04:42:48.897838 ARP, Request who-has 192.168.1.11 tell 192.168.1.10, length 28
04:42:48.897886 ARP, Request who-has 192.168.1.10 tell 192.168.1.11, length 28
04:42:48.897895 ARP, Reply 192.168.1.10 is-at 9a:28:dd:bb:a5:c8, length 28
04:42:48.897906 ARP, Reply 192.168.1.11 is-at 5a:14:87:18:10:71, length 28


<span class="token comment"># network namespace: ns1</span>
$ tcpdump -n -i veth1
tcpdump: verbose output suppressed, use -v or -vv <span class="token keyword">for</span> full protocol decode
listening on veth1, link-type EN10MB <span class="token punctuation">(</span>Ethernet<span class="token punctuation">)</span>, capture size 262144 bytes
04:42:43.877449 IP 192.168.1.10 <span class="token operator">&gt;</span> 192.168.1.11: ICMP <span class="token keyword">echo</span> request, <span class="token function">id</span> 96, <span class="token function">seq</span> 1, length 64
04:42:43.877466 IP 192.168.1.11 <span class="token operator">&gt;</span> 192.168.1.10: ICMP <span class="token keyword">echo</span> reply, <span class="token function">id</span> 96, <span class="token function">seq</span> 1, length 64
04:42:44.897664 IP 192.168.1.10 <span class="token operator">&gt;</span> 192.168.1.11: ICMP <span class="token keyword">echo</span> request, <span class="token function">id</span> 96, <span class="token function">seq</span> 2, length 64
04:42:44.897686 IP 192.168.1.11 <span class="token operator">&gt;</span> 192.168.1.10: ICMP <span class="token keyword">echo</span> reply, <span class="token function">id</span> 96, <span class="token function">seq</span> 2, length 64
04:42:45.937246 IP 192.168.1.10 <span class="token operator">&gt;</span> 192.168.1.11: ICMP <span class="token keyword">echo</span> request, <span class="token function">id</span> 96, <span class="token function">seq</span> 3, length 64
04:42:45.937268 IP 192.168.1.11 <span class="token operator">&gt;</span> 192.168.1.10: ICMP <span class="token keyword">echo</span> reply, <span class="token function">id</span> 96, <span class="token function">seq</span> 3, length 64
04:42:46.978924 IP 192.168.1.10 <span class="token operator">&gt;</span> 192.168.1.11: ICMP <span class="token keyword">echo</span> request, <span class="token function">id</span> 96, <span class="token function">seq</span> 4, length 64
04:42:46.978947 IP 192.168.1.11 <span class="token operator">&gt;</span> 192.168.1.10: ICMP <span class="token keyword">echo</span> reply, <span class="token function">id</span> 96, <span class="token function">seq</span> 4, length 64
04:42:48.897796 ARP, Request who-has 192.168.1.10 tell 192.168.1.11, length 28
04:42:48.897897 ARP, Request who-has 192.168.1.11 tell 192.168.1.10, length 28
04:42:48.897902 ARP, Reply 192.168.1.11 is-at 5a:14:87:18:10:71, length 28
04:42:48.897903 ARP, Reply 192.168.1.10 is-at 9a:28:dd:bb:a5:c8, length 28
</pre><p>&#x63A5;&#x7740;&#x4E0A;&#x9762;&#x7684;&#x914D;&#x7F6E;&#xFF0C;&#x4E0B;&#x9762;&#x5F00;&#x59CB;bridge</p>
<h2 class="mume-header" id="%E4%BB%80%E4%B9%88%E6%98%AFbridge" ebook-toc-level-2 heading="&amp;#x4EC0;&amp;#x4E48;&amp;#x662F;bridge">&#x4EC0;&#x4E48;&#x662F;bridge</h2>

<p>&#x9996;&#x5148;&#xFF0C;bridge&#x662F;&#x4E00;&#x4E2A;&#x865A;&#x62DF;&#x7F51;&#x7EDC;&#x8BBE;&#x5907;&#xFF0C;&#x6240;&#x4EE5;&#x5177;&#x6709;&#x7F51;&#x7EDC;&#x8BBE;&#x5907;&#x7684;&#x7279;&#x5F81;&#xFF0C;&#x53EF;&#x4EE5;&#x914D;&#x7F6E;IP&#x3001;MAC&#x5730;&#x5740;&#x7B49;&#xFF1B;&#x5176;&#x6B21;&#xFF0C;bridge&#x662F;&#x4E00;&#x4E2A;&#x865A;&#x62DF;&#x4EA4;&#x6362;&#x673A;&#xFF0C;&#x548C;&#x7269;&#x7406;&#x4EA4;&#x6362;&#x673A;&#x6709;&#x7C7B;&#x4F3C;&#x7684;&#x529F;&#x80FD;&#x3002;</p>
<p>&#x5BF9;&#x4E8E;&#x666E;&#x901A;&#x7684;&#x7F51;&#x7EDC;&#x8BBE;&#x5907;&#x6765;&#x8BF4;&#xFF0C;&#x53EA;&#x6709;&#x4E24;&#x7AEF;&#xFF0C;&#x4ECE;&#x4E00;&#x7AEF;&#x8FDB;&#x6765;&#x7684;&#x6570;&#x636E;&#x4F1A;&#x4ECE;&#x53E6;&#x4E00;&#x7AEF;&#x51FA;&#x53BB;&#xFF0C;&#x5982;&#x7269;&#x7406;&#x7F51;&#x5361;&#x4ECE;&#x5916;&#x9762;&#x7F51;&#x7EDC;&#x4E2D;&#x6536;&#x5230;&#x7684;&#x6570;&#x636E;&#x4F1A;&#x8F6C;&#x53D1;&#x7ED9;&#x5185;&#x6838;&#x534F;&#x8BAE;&#x6808;&#xFF0C;&#x800C;&#x4ECE;&#x534F;&#x8BAE;&#x6808;&#x8FC7;&#x6765;&#x7684;&#x6570;&#x636E;&#x4F1A;&#x8F6C;&#x53D1;&#x5230;&#x5916;&#x9762;&#x7684;&#x7269;&#x7406;&#x7F51;&#x7EDC;&#x4E2D;&#x3002;</p>
<p>&#x800C;bridge&#x4E0D;&#x540C;&#xFF0C;bridge&#x6709;&#x591A;&#x4E2A;&#x7AEF;&#x53E3;&#xFF0C;&#x6570;&#x636E;&#x53EF;&#x4EE5;&#x4ECE;&#x4EFB;&#x4F55;&#x7AEF;&#x53E3;&#x8FDB;&#x6765;&#xFF0C;&#x8FDB;&#x6765;&#x4E4B;&#x540E;&#x4ECE;&#x54EA;&#x4E2A;&#x53E3;&#x51FA;&#x53BB;&#x548C;&#x7269;&#x7406;&#x4EA4;&#x6362;&#x673A;&#x7684;&#x539F;&#x7406;&#x5DEE;&#x4E0D;&#x591A;&#xFF0C;&#x8981;&#x770B;mac&#x5730;&#x5740;&#x3002;</p>
<h3 class="mume-header" id="%E5%88%9B%E5%BB%BAbridge" ebook-toc-level-3 heading="&amp;#x521B;&amp;#x5EFA;bridge">&#x521B;&#x5EFA;bridge</h3>

<p>&#x5148;&#x7528;iproute2&#x5DE5;&#x5177;&#x521B;&#x5EFA;&#x4E00;&#x4E2A;&#x7F51;&#x6865;&#xFF1A;</p>
<pre data-role="codeBlock" data-info="bash" class="language-bash"><span class="token comment"># &#x521B;&#x5EFA;&#x7F51;&#x6865;</span>
<span class="token function">ip</span> <span class="token function">link</span> add name br0 <span class="token function">type</span> bridge 
<span class="token comment"># &#x542F;&#x7528;&#x7F51;&#x6865;</span>
<span class="token function">ip</span> <span class="token function">link</span> <span class="token keyword">set</span> br0 up 
</pre><p>&#x5F53;&#x521A;&#x521B;&#x5EFA;&#x4E00;&#x4E2A;bridge&#x65F6;&#xFF0C;&#x5B83;&#x662F;&#x4E00;&#x4E2A;&#x72EC;&#x7ACB;&#x7684;&#x7F51;&#x7EDC;&#x8BBE;&#x5907;&#xFF0C;&#x53EA;&#x6709;&#x4E00;&#x4E2A;&#x7AEF;&#x53E3;&#x8FDE;&#x7740;&#x534F;&#x8BAE;&#x6808;&#xFF0C;&#x5176;&#x5B83;&#x7684;&#x7AEF;&#x53E3;&#x5565;&#x90FD;&#x6CA1;&#x8FDE;&#xFF0C;&#x8FD9;&#x6837;&#x7684;bridge&#x6CA1;&#x6709;&#x4EFB;&#x4F55;&#x5B9E;&#x9645;&#x529F;&#x80FD;&#xFF0C;&#x5982;&#x4E0B;&#x56FE;&#x6240;&#x793A;&#xFF1A;</p>
<p><!--?xml version="1.0" encoding="UTF-8" standalone="no"?-->

<!-- Generated by graphviz version 2.40.1 (20161225.0304)
 -->
<!-- Title: G Pages: 1 -->
<svg width="188pt" height="212pt" viewBox="0.00 0.00 188.00 212.00" xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 208)">
<title>G</title>
<polygon fill="#ffffff" stroke="transparent" points="-4,4 -4,-208 184,-208 184,4 -4,4"/>
<g id="clust1" class="cluster">
<title>cluster3</title>
<polygon fill="none" stroke="#000000" points="8,-56 8,-196 172,-196 172,-56 8,-56"/>
</g>
<g id="clust2" class="cluster">
<title>cluster0</title>
<polygon fill="none" stroke="#000000" points="16,-136 16,-188 164,-188 164,-136 16,-136"/>
</g>
<g id="clust3" class="cluster">
<title>cluster1</title>
<polygon fill="none" stroke="#000000" points="19,-64 19,-116 161,-116 161,-64 19,-64"/>
</g>
<!-- nps -->
<g id="node1" class="node">
<title>nps</title>
<polygon fill="#c0c0c0" stroke="#c0c0c0" points="155.8036,-180 24.1964,-180 24.1964,-144 155.8036,-144 155.8036,-180"/>
<text text-anchor="middle" x="90" y="-158.4" font-family="Times,serif" font-size="12.00" fill="#000000">Network Protocol Stack</text>
</g>
<!-- eth0 -->
<g id="node2" class="node">
<title>eth0</title>
<polygon fill="#c0c0c0" stroke="#c0c0c0" points="153,-108 99,-108 99,-72 153,-72 153,-108"/>
<text text-anchor="middle" x="126" y="-86.4" font-family="Times,serif" font-size="12.00" fill="#000000">neth0</text>
</g>
<!-- nps&#45;&gt;eth0 -->
<g id="edge1" class="edge">
<title>nps-&gt;eth0</title>
<path fill="none" stroke="#000000" d="M103.6513,-134.6975C106.4642,-129.0715 109.4279,-123.1442 112.2446,-117.5109"/>
<polygon fill="#000000" stroke="#000000" points="99.0843,-143.8314 99.5316,-132.8746 101.3204,-139.3592 103.5565,-134.8871 103.5565,-134.8871 103.5565,-134.8871 101.3204,-139.3592 107.5814,-136.8996 99.0843,-143.8314 99.0843,-143.8314"/>
<polygon fill="#000000" stroke="#000000" points="116.7934,-108.4133 116.3461,-119.37 114.5573,-112.8854 112.3212,-117.3575 112.3212,-117.3575 112.3212,-117.3575 114.5573,-112.8854 108.2962,-115.3451 116.7934,-108.4133 116.7934,-108.4133"/>
</g>
<!-- br0 -->
<g id="node3" class="node">
<title>br0</title>
<polygon fill="#c0c0c0" stroke="#c0c0c0" points="81,-108 27,-108 27,-72 81,-72 81,-108"/>
<text text-anchor="middle" x="54" y="-86.4" font-family="Times,serif" font-size="12.00" fill="#000000">br0</text>
</g>
<!-- nps&#45;&gt;br0 -->
<g id="edge2" class="edge">
<title>nps-&gt;br0</title>
<path fill="none" stroke="#000000" d="M76.3487,-134.6975C73.5358,-129.0715 70.5721,-123.1442 67.7554,-117.5109"/>
<polygon fill="#000000" stroke="#000000" points="80.9157,-143.8314 72.4186,-136.8996 78.6796,-139.3592 76.4435,-134.8871 76.4435,-134.8871 76.4435,-134.8871 78.6796,-139.3592 80.4684,-132.8746 80.9157,-143.8314 80.9157,-143.8314"/>
<polygon fill="#000000" stroke="#000000" points="63.2066,-108.4133 71.7038,-115.3451 65.4427,-112.8854 67.6788,-117.3575 67.6788,-117.3575 67.6788,-117.3575 65.4427,-112.8854 63.6539,-119.37 63.2066,-108.4133 63.2066,-108.4133"/>
</g>
<!-- pn -->
<g id="node4" class="node">
<title>pn</title>
<polygon fill="#c0c0c0" stroke="#c0c0c0" points="176.6434,-36 75.3566,-36 75.3566,0 176.6434,0 176.6434,-36"/>
<text text-anchor="middle" x="126" y="-14.4" font-family="Times,serif" font-size="12.00" fill="#000000">Physical Network</text>
</g>
<!-- eth0&#45;&gt;pn -->
<g id="edge3" class="edge">
<title>eth0-&gt;pn</title>
<path fill="none" stroke="#000000" d="M126,-61.5726C126,-56.6792 126,-51.5904 126,-46.6901"/>
<polygon fill="#000000" stroke="#000000" points="126,-71.8314 121.5001,-61.8313 126,-66.8314 126.0001,-61.8314 126.0001,-61.8314 126.0001,-61.8314 126,-66.8314 130.5001,-61.8314 126,-71.8314 126,-71.8314"/>
<polygon fill="#000000" stroke="#000000" points="126,-36.4133 130.5001,-46.4132 126,-41.4133 126.0001,-46.4133 126.0001,-46.4133 126.0001,-46.4133 126,-41.4133 121.5001,-46.4133 126,-36.4133 126,-36.4133"/>
</g>
</g>
</svg>
</p><h3 class="mume-header" id="%E5%88%9B%E5%BB%BAveth%E8%AE%BE%E5%A4%87%E4%B8%8Ebridge%E8%AE%BE%E5%A4%87%E7%9B%B8%E8%BF%9E" ebook-toc-level-3 heading="&amp;#x521B;&amp;#x5EFA;veth&amp;#x8BBE;&amp;#x5907;&amp;#xFF0C;&amp;#x4E0E;bridge&amp;#x8BBE;&amp;#x5907;&amp;#x76F8;&amp;#x8FDE;">&#x521B;&#x5EFA;veth&#x8BBE;&#x5907;&#xFF0C;&#x4E0E;bridge&#x8BBE;&#x5907;&#x76F8;&#x8FDE;</h3>

<p>veth&#x662F;&#x6210;&#x5BF9;&#x521B;&#x5EFA;&#xFF0C;&#x521B;&#x5EFA;&#x540E;&#x914D;&#x7F6E;IP&#x3002;<em>(&#x8BE6;&#x89C1;&#x672C;&#x6587;veth&#x90E8;&#x5206;)</em></p>
<pre data-role="codeBlock" data-info="bash" class="language-bash"><span class="token comment"># &#x5C06;eth0&#x8FDE;&#x63A5;br0</span>
$ <span class="token function">ip</span> <span class="token function">link</span> <span class="token keyword">set</span> dev veth0 master br0
<span class="token comment"># &#x901A;&#x8FC7;bridge link&#x547D;&#x4EE4;&#x53EF;&#x4EE5;&#x770B;&#x5230;br0&#x4E0A;&#x8FDE;&#x63A5;&#x4E86;&#x54EA;&#x4E9B;&#x8BBE;&#x5907;</span>
$ bridge <span class="token function">link</span>
6: veth0@veth1: <span class="token operator">&lt;</span>BROADCAST,MULTICAST,UP,LOWER_UP<span class="token operator">&gt;</span> mtu 1500 master br0 state forwarding priority 32 cost 2
</pre><p>&#x6B64;&#x65F6;&#xFF0C;&#x7F51;&#x7EDC;&#x62D3;&#x6251;&#x56FE;&#x5982;&#x4E0B;&#xFF1A;</p>
<p><!--?xml version="1.0" encoding="UTF-8" standalone="no"?-->

<!-- Generated by graphviz version 2.40.1 (20161225.0304)
 -->
<!-- Title: G Pages: 1 -->
<svg width="326pt" height="277pt" viewBox="0.00 0.00 325.82 276.80" xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 272.8)">
<title>G</title>
<polygon fill="#ffffff" stroke="transparent" points="-4,4 -4,-272.8 321.8214,-272.8 321.8214,4 -4,4"/>
<g id="clust1" class="cluster">
<title>cluster0</title>
<polygon fill="none" stroke="#000000" points="15.8214,-64 15.8214,-260.8 309.8214,-260.8 309.8214,-64 15.8214,-64"/>
</g>
<!-- nps -->
<g id="node1" class="node">
<title>nps</title>
<polygon fill="#c0c0c0" stroke="#c0c0c0" points="219.625,-252.8 88.0178,-252.8 88.0178,-216.8 219.625,-216.8 219.625,-252.8"/>
<text text-anchor="middle" x="153.8214" y="-231.2" font-family="Times,serif" font-size="12.00" fill="#000000">Network Protocol Stack</text>
</g>
<!-- eth0 -->
<g id="node2" class="node">
<title>eth0</title>
<polygon fill="#c0c0c0" stroke="#c0c0c0" points="77.8214,-108.4 23.8214,-108.4 23.8214,-72.4 77.8214,-72.4 77.8214,-108.4"/>
<text text-anchor="middle" x="50.8214" y="-86.8" font-family="Times,serif" font-size="12.00" fill="#000000">eth0</text>
</g>
<!-- nps&#45;&gt;eth0 -->
<g id="edge1" class="edge">
<title>nps-&gt;eth0</title>
<path fill="none" stroke="#000000" d="M122.1483,-209.7923C112.6054,-201.2646 102.6091,-191.2314 94.8214,-180.8 80.3939,-161.4746 68.7229,-136.6766 61.0357,-117.9427"/>
<polygon fill="#000000" stroke="#000000" points="129.9993,-216.5771 119.4907,-213.4432 126.2162,-213.3078 122.4331,-210.0384 122.4331,-210.0384 122.4331,-210.0384 126.2162,-213.3078 125.3755,-206.6337 129.9993,-216.5771 129.9993,-216.5771"/>
<polygon fill="#000000" stroke="#000000" points="57.2841,-108.4966 65.1575,-116.1294 59.1297,-113.1435 60.9753,-117.7904 60.9753,-117.7904 60.9753,-117.7904 59.1297,-113.1435 56.793,-119.4514 57.2841,-108.4966 57.2841,-108.4966"/>
</g>
<!-- br0 -->
<g id="node3" class="node">
<title>br0</title>
<polygon fill="#c0c0c0" stroke="#c0c0c0" points="157.8214,-180.8 103.8214,-180.8 103.8214,-144.8 157.8214,-144.8 157.8214,-180.8"/>
<text text-anchor="middle" x="130.8214" y="-159.2" font-family="Times,serif" font-size="12.00" fill="#000000">br0</text>
</g>
<!-- nps&#45;&gt;br0 -->
<g id="edge2" class="edge">
<title>nps-&gt;br0</title>
<path fill="none" stroke="#000000" d="M144.9204,-206.936C143.2415,-201.6803 141.4846,-196.1805 139.8033,-190.9171"/>
<polygon fill="#000000" stroke="#000000" points="148.0175,-216.6314 140.6879,-208.4749 146.496,-211.8685 144.9745,-207.1056 144.9745,-207.1056 144.9745,-207.1056 146.496,-211.8685 149.2611,-205.7362 148.0175,-216.6314 148.0175,-216.6314"/>
<polygon fill="#000000" stroke="#000000" points="136.7034,-181.2133 144.033,-189.3697 138.2249,-185.9762 139.7464,-190.739 139.7464,-190.739 139.7464,-190.739 138.2249,-185.9762 135.4598,-192.1084 136.7034,-181.2133 136.7034,-181.2133"/>
</g>
<!-- veth0 -->
<g id="node4" class="node">
<title>veth0</title>
<polygon fill="#c0c0c0" stroke="#c0c0c0" points="190.1568,-108.7005 95.486,-108.7005 95.486,-72.0995 190.1568,-72.0995 190.1568,-108.7005"/>
<text text-anchor="middle" x="142.8214" y="-94" font-family="Times,serif" font-size="12.00" fill="#000000">192.168.1.10/24</text>
<text text-anchor="middle" x="142.8214" y="-79.6" font-family="Times,serif" font-size="12.00" fill="#000000">veth0</text>
</g>
<!-- nps&#45;&gt;veth0 -->
<g id="edge3" class="edge">
<title>nps-&gt;veth0</title>
<path fill="none" stroke="#000000" d="M160.1326,-216.7506C165.6507,-198.4935 172.0313,-169.5163 166.8214,-144.8 164.9238,-135.7977 161.4386,-126.4701 157.7012,-118.1347"/>
<polygon fill="#000000" stroke="#000000" points="153.278,-108.8846 161.6517,-115.9649 155.435,-113.3954 157.592,-117.9062 157.592,-117.9062 157.592,-117.9062 155.435,-113.3954 153.5322,-119.8475 153.278,-108.8846 153.278,-108.8846"/>
</g>
<!-- veth1 -->
<g id="node5" class="node">
<title>veth1</title>
<polygon fill="#c0c0c0" stroke="#c0c0c0" points="302.1568,-108.7005 207.486,-108.7005 207.486,-72.0995 302.1568,-72.0995 302.1568,-108.7005"/>
<text text-anchor="middle" x="254.8214" y="-94" font-family="Times,serif" font-size="12.00" fill="#000000">192.168.1.11/16</text>
<text text-anchor="middle" x="254.8214" y="-79.6" font-family="Times,serif" font-size="12.00" fill="#000000">veth1</text>
</g>
<!-- nps&#45;&gt;veth1 -->
<g id="edge4" class="edge">
<title>nps-&gt;veth1</title>
<path fill="none" stroke="#000000" d="M172.4704,-208.1375C190.5704,-182.2599 217.8945,-143.1945 236.0395,-117.2526"/>
<polygon fill="#000000" stroke="#000000" points="166.6131,-216.5116 168.6572,-205.7379 169.4789,-212.4144 172.3447,-208.3172 172.3447,-208.3172 172.3447,-208.3172 169.4789,-212.4144 176.0322,-210.8964 166.6131,-216.5116 166.6131,-216.5116"/>
<polygon fill="#000000" stroke="#000000" points="241.8145,-108.996 239.7704,-119.7697 238.9487,-113.0932 236.0829,-117.1904 236.0829,-117.1904 236.0829,-117.1904 238.9487,-113.0932 232.3954,-114.6112 241.8145,-108.996 241.8145,-108.996"/>
</g>
<!-- pn -->
<g id="node6" class="node">
<title>pn</title>
<polygon fill="#c0c0c0" stroke="#c0c0c0" points="101.4648,-36 .178,-36 .178,0 101.4648,0 101.4648,-36"/>
<text text-anchor="middle" x="50.8214" y="-14.4" font-family="Times,serif" font-size="12.00" fill="#000000">Physical Network</text>
</g>
<!-- eth0&#45;&gt;pn -->
<g id="edge7" class="edge">
<title>eth0-&gt;pn</title>
<path fill="none" stroke="#000000" d="M50.8214,-61.9368C50.8214,-56.752 50.8214,-51.345 50.8214,-46.1688"/>
<polygon fill="#000000" stroke="#000000" points="50.8214,-72.1304 46.3215,-62.1304 50.8214,-67.1304 50.8215,-62.1304 50.8215,-62.1304 50.8215,-62.1304 50.8214,-67.1304 55.3215,-62.1305 50.8214,-72.1304 50.8214,-72.1304"/>
<polygon fill="#000000" stroke="#000000" points="50.8214,-36.0129 55.3215,-46.0129 50.8214,-41.0129 50.8215,-46.0129 50.8215,-46.0129 50.8215,-46.0129 50.8214,-41.0129 46.3215,-46.013 50.8214,-36.0129 50.8214,-36.0129"/>
</g>
<!-- br0&#45;&gt;veth0 -->
<g id="edge5" class="edge">
<title>br0-&gt;veth0</title>
<path fill="none" stroke="#000000" d="M135.5123,-134.4981C136.3579,-129.3964 137.2399,-124.0748 138.0868,-118.9656"/>
<polygon fill="#000000" stroke="#000000" points="133.8495,-144.5304 131.0453,-133.9292 134.6671,-139.5977 135.4847,-134.665 135.4847,-134.665 135.4847,-134.665 134.6671,-139.5977 139.9242,-135.4009 133.8495,-144.5304 133.8495,-144.5304"/>
<polygon fill="#000000" stroke="#000000" points="139.7525,-108.9156 142.5567,-119.5168 138.9349,-113.8483 138.1173,-118.781 138.1173,-118.781 138.1173,-118.781 138.9349,-113.8483 133.6779,-118.0451 139.7525,-108.9156 139.7525,-108.9156"/>
</g>
<!-- veth0&#45;&gt;veth1 -->
<g id="edge6" class="edge">
<title>veth0-&gt;veth1</title>
<path fill="none" stroke="#000000" d="M200.1609,-90.4C200.3143,-90.4 200.4677,-90.4 200.6211,-90.4"/>
<polygon fill="#000000" stroke="#000000" points="190.0714,-90.4 200.0714,-85.9001 195.0714,-90.4 200.0714,-90.4001 200.0714,-90.4001 200.0714,-90.4001 195.0714,-90.4 200.0714,-94.9001 190.0714,-90.4 190.0714,-90.4"/>
<polygon fill="#000000" stroke="#000000" points="207.5235,-90.4 197.5236,-94.9001 202.5235,-90.4001 197.5235,-90.4001 197.5235,-90.4001 197.5235,-90.4001 202.5235,-90.4001 197.5235,-85.9001 207.5235,-90.4 207.5235,-90.4"/>
</g>
</g>
</svg>
</p><p>br0&#x548C;veth0&#x8FDE;&#x63A5;&#x540E;&#xFF0C;&#x6709;&#x5982;&#x4E0B;&#x53D8;&#x5316;&#xFF1A;</p>
<ul>
<li>br0&#xFF0C;veth0&#x8054;&#x901A;&#xFF0C;&#x5E76;&#x4E14;&#x662F;&#x53CC;&#x5411;&#x901A;&#x9053;</li>
<li>&#x534F;&#x8BAE;&#x6808;&#x548C;veth0&#x53D8;&#x6210;&#x4E86;&#x5355;&#x901A;&#x9053;&#xFF0C;&#x534F;&#x8BAE;&#x6808;&#x80FD;&#x4F20;&#x8F93;&#x6570;&#x636E;&#x7ED9;veth0&#xFF0C;&#x4F46;veth0&#x4ECE;&#x5916;&#x90E8;&#x8F6C;&#x53D1;&#x7684;&#x6570;&#x636E;&#x4E0D;&#x4F1A;&#x7ED9;&#x534F;&#x8BAE;&#x6808;</li>
<li>br0&#x7684;mac&#x5730;&#x5740;&#x53D8;&#x6210;&#x4E86;veth0&#x7684;mac&#x5730;&#x5740;</li>
</ul>
<p>&#x4E0B;&#x9762;&#x9A8C;&#x8BC1;&#x4E00;&#x4E0B;&#x4E0A;&#x8FF0;&#x6240;&#x8BF4;&#x7684;&#x6570;&#x636E;&#x6D41;&#x5411;&#x662F;&#x5426;&#x6B63;&#x786E;&#xFF1A;</p>
<p>&#x901A;&#x8FC7;veth0 ping veth1&#xFF0C;(&#x5931;&#x8D25;)&#xFF1A;</p>
<pre data-role="codeBlock" data-info="bash" class="language-bash">$ <span class="token function">ping</span> -c 1 192.168.1.11 -I veth0
PING 192.168.1.11 <span class="token punctuation">(</span>192.168.1.11<span class="token punctuation">)</span> from 192.168.1.10 veth0: 56<span class="token punctuation">(</span>84<span class="token punctuation">)</span> bytes of data.

--- 192.168.1.11 <span class="token function">ping</span> statistics ---
1 packets transmitted, 0 received, 100% packet loss, <span class="token function">time</span> 0ms
</pre><p>&#x4E3A;&#x4EC0;&#x4E48;veht0&#x52A0;&#x5165;bridge&#x540E;&#xFF0C;&#x5C31;ping&#x4E0D;&#x901A;veht1&#x5462;&#xFF1F;&#x901A;&#x8FC7;tcpdump&#x6293;&#x5305;&#x5206;&#x6790;&#x4E0B;&#xFF1A;<br>
<em>PS: debian&#x7CFB;&#x5217;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x547D;&#x4EE4;&#xFF1A;apt-get install tcpdump &#x5B89;&#x88C5;</em></p>
<pre data-role="codeBlock" data-info="bash" class="language-bash">$ tcpdump -n -i veth0
tcpdump: verbose output suppressed, use -v or -vv <span class="token keyword">for</span> full protocol decode
listening on veth0, link-type EN10MB <span class="token punctuation">(</span>Ethernet<span class="token punctuation">)</span>, capture size 262144 bytes
06:33:19.468165 ARP, Request who-has 192.168.1.11 tell 192.168.1.10, length 28
06:33:19.468219 ARP, Reply 192.168.1.11 is-at 5a:14:87:18:10:71, length 28
06:33:20.513989 ARP, Request who-has 192.168.1.11 tell 192.168.1.10, length 28
06:33:20.514109 ARP, Reply 192.168.1.11 is-at 5a:14:87:18:10:71, length 28
06:33:21.532741 ARP, Request who-has 192.168.1.11 tell 192.168.1.10, length 28
06:33:21.533132 ARP, Reply 192.168.1.11 is-at 5a:14:87:18:10:71, length 28

$ <span class="token function">ip</span> netns <span class="token function">exec</span> ns1 tcpdump -n -i veth1
tcpdump: verbose output suppressed, use -v or -vv <span class="token keyword">for</span> full protocol decode
listening on veth1, link-type EN10MB <span class="token punctuation">(</span>Ethernet<span class="token punctuation">)</span>, capture size 262144 bytes
06:33:19.468190 ARP, Request who-has 192.168.1.11 tell 192.168.1.10, length 28
06:33:19.468217 ARP, Reply 192.168.1.11 is-at 5a:14:87:18:10:71, length 28
06:33:20.514023 ARP, Request who-has 192.168.1.11 tell 192.168.1.10, length 28
06:33:20.514108 ARP, Reply 192.168.1.11 is-at 5a:14:87:18:10:71, length 28
06:33:21.532782 ARP, Request who-has 192.168.1.11 tell 192.168.1.10, length 28
06:33:21.533129 ARP, Reply 192.168.1.11 is-at 5a:14:87:18:10:71, length 28

$ tcpdump -n -i br0
tcpdump: verbose output suppressed, use -v or -vv <span class="token keyword">for</span> full protocol decode
listening on br0, link-type EN10MB <span class="token punctuation">(</span>Ethernet<span class="token punctuation">)</span>, capture size 262144 bytes
06:33:19.468227 ARP, Reply 192.168.1.11 is-at 5a:14:87:18:10:71, length 28
06:33:20.514109 ARP, Reply 192.168.1.11 is-at 5a:14:87:18:10:71, length 28
06:33:21.533132 ARP, Reply 192.168.1.11 is-at 5a:14:87:18:10:71, length 28
</pre><p>&#x901A;&#x8FC7;tcpdump&#x53EF;&#x4EE5;&#x770B;&#x51FA;&#xFF0C;&#x7531;&#x4E8E;veth0&#x7684;arp&#x7F13;&#x5B58;&#x91CC;&#x6CA1;&#x6709;veth1&#x7684;mac&#x5730;&#x5740;&#xFF0C;&#x6240;&#x4EE5;ping&#x4E4B;&#x524D;&#x5148;&#x53D1;&#x9001;arp&#x8BF7;&#x6C42;&#x3002;&#x6293;&#x5305;&#x6570;&#x636E;&#x663E;&#x793A;&#xFF0C;veth0&#x53D1;&#x51FA;&#x4E86;arp&#x8BF7;&#x6C42;&#xFF0C;&#x6536;&#x5230;&#x4E86;&#x8FD4;&#x56DE;&#xFF0C;veth1&#x6536;&#x5230;&#x4E86;arp&#x8BF7;&#x6C42;&#xFF0C;&#x4E5F;&#x54CD;&#x5E94;&#x4E86;arp&#x8BF7;&#x6C42;&#xFF0C;&#x4F46;&#x662F;br0&#x4E0A;&#x53EA;&#x53D1;&#x73B0;&#x4E86;&#x5E94;&#x7B54;&#x6570;&#x636E;&#x3002;&#x603B;&#x4F53;&#x8BF7;&#x6C42;&#x54CD;&#x5E94;&#x7684;&#x6D41;&#x7A0B;&#x6CA1;&#x6709;&#x95EE;&#x9898;&#xFF0C;&#x95EE;&#x9898;&#x51FA;&#x5728;veth0&#x6536;&#x5230;&#x5E94;&#x7B54;&#x5305;&#x4E4B;&#x540E;&#xFF0C;&#x6CA1;&#x6709;&#x7ED9;&#x534F;&#x8BAE;&#x6808;&#xFF0C;&#x800C;&#x662F;&#x7ED9;&#x4E86;br0&#xFF0C;&#x534F;&#x8BAE;&#x6808;&#x5F97;&#x4E0D;&#x5230;veth1&#x7684;mac&#x5730;&#x5740;&#xFF0C;&#x6240;&#x4EE5;&#x901A;&#x8BAF;&#x5931;&#x8D25;&#x3002;</p>
<h3 class="mume-header" id="%E7%BB%99bridge%E9%85%8D%E7%BD%AEip" ebook-toc-level-3 heading="&amp;#x7ED9;bridge&amp;#x914D;&amp;#x7F6E;IP">&#x7ED9;bridge&#x914D;&#x7F6E;IP</h3>

<p>&#x901A;&#x8FC7;&#x4E0A;&#x9762;&#x7684;&#x5206;&#x6790;&#x53D1;&#x73B0;&#xFF0C;&#x7ED9;<code>veth0</code>&#x5206;&#x914D;IP&#x65E0;&#x610F;&#x4E49;&#xFF0C;&#x5373;&#x4F7F;&#x534F;&#x8BAE;&#x6808;&#x7ED9;<code>veth0</code>&#x4F20;&#x6570;&#x636E;&#xFF0C;&#x4E5F;&#x6536;&#x4E0D;&#x5230;&#x54CD;&#x5E94;&#xFF0C;&#x6240;&#x4EE5;&#x6211;&#x4EEC;&#x628A;<code>veth0</code>&#x7684;IP&#x5730;&#x5740;&#x8F6C;&#x8BA9;&#x7ED9;bridge(<code>br0</code>)&#x3002;</p>
<pre data-role="codeBlock" data-info="bash" class="language-bash">$ <span class="token function">ip</span> addr del 192.168.1.10/24 dev veth0
$ <span class="token function">ip</span> addr add 192.168.1.10/24 dev br0
</pre><p>&#x5206;&#x914D;&#x4E4B;&#x540E;&#x5982;&#x56FE;&#x6240;&#x793A;&#xFF1A;</p>
<p><!--?xml version="1.0" encoding="UTF-8" standalone="no"?-->

<!-- Generated by graphviz version 2.40.1 (20161225.0304)
 -->
<!-- Title: G Pages: 1 -->
<svg width="294pt" height="286pt" viewBox="0.00 0.00 294.00 285.60" xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 281.6)">
<title>G</title>
<polygon fill="#ffffff" stroke="transparent" points="-4,4 -4,-281.6 290,-281.6 290,4 -4,4"/>
<g id="clust1" class="cluster">
<title>cluster0</title>
<polygon fill="none" stroke="#000000" points="8,-56 8,-269.6 278,-269.6 278,-56 8,-56"/>
</g>
<g id="clust4" class="cluster">
<title>cluster2</title>
<polygon fill="none" stroke="#000000" points="16,-64 16,-189.6 270,-189.6 270,-64 16,-64"/>
</g>
<g id="clust2" class="cluster">
<title>cluster1</title>
<polygon fill="none" stroke="#000000" points="80,-209.6 80,-261.6 228,-261.6 228,-209.6 80,-209.6"/>
</g>
<!-- nps -->
<g id="node1" class="node">
<title>nps</title>
<polygon fill="#c0c0c0" stroke="#c0c0c0" points="219.8036,-253.6 88.1964,-253.6 88.1964,-217.6 219.8036,-217.6 219.8036,-253.6"/>
<text text-anchor="middle" x="154" y="-232" font-family="Times,serif" font-size="12.00" fill="#000000">Network Protocol Stack</text>
</g>
<!-- eth0 -->
<g id="node2" class="node">
<title>eth0</title>
<polygon fill="#c0c0c0" stroke="#c0c0c0" points="78,-108.4 24,-108.4 24,-72.4 78,-72.4 78,-108.4"/>
<text text-anchor="middle" x="51" y="-86.8" font-family="Times,serif" font-size="12.00" fill="#000000">eth0</text>
</g>
<!-- nps&#45;&gt;eth0 -->
<g id="edge1" class="edge">
<title>nps-&gt;eth0</title>
<path fill="none" stroke="#000000" d="M90.5563,-212.5969C80.7031,-206.4964 71.6158,-198.9265 65,-189.6 50.4514,-169.0905 47.8701,-140.1079 48.3793,-118.7636"/>
<polygon fill="#000000" stroke="#000000" points="99.3693,-217.5869 88.4502,-216.5757 95.0184,-215.1234 90.6674,-212.6598 90.6674,-212.6598 90.6674,-212.6598 95.0184,-215.1234 92.8846,-208.7439 99.3693,-217.5869 99.3693,-217.5869"/>
<polygon fill="#000000" stroke="#000000" points="48.8593,-108.677 52.8788,-118.8796 48.6216,-113.6714 48.3839,-118.6657 48.3839,-118.6657 48.3839,-118.6657 48.6216,-113.6714 43.889,-118.4518 48.8593,-108.677 48.8593,-108.677"/>
</g>
<!-- br0 -->
<g id="node3" class="node">
<title>br0</title>
<polygon fill="#c0c0c0" stroke="#c0c0c0" points="168.3354,-181.5005 73.6646,-181.5005 73.6646,-144.8995 168.3354,-144.8995 168.3354,-181.5005"/>
<text text-anchor="middle" x="121" y="-166.8" font-family="Times,serif" font-size="12.00" fill="#000000">192.168.1.10/24</text>
<text text-anchor="middle" x="121" y="-152.4" font-family="Times,serif" font-size="12.00" fill="#000000">br0</text>
</g>
<!-- nps&#45;&gt;br0 -->
<g id="edge2" class="edge">
<title>nps-&gt;br0</title>
<path fill="none" stroke="#000000" d="M141.4863,-208.1458C138.9078,-202.4886 136.1911,-196.5283 133.6092,-190.8637"/>
<polygon fill="#000000" stroke="#000000" points="145.6727,-217.3304 137.4304,-210.0975 143.5989,-212.7807 141.5252,-208.2311 141.5252,-208.2311 141.5252,-208.2311 143.5989,-212.7807 145.6199,-206.3647 145.6727,-217.3304 145.6727,-217.3304"/>
<polygon fill="#000000" stroke="#000000" points="129.4394,-181.7156 137.6817,-188.9485 131.5132,-186.2652 133.587,-190.8149 133.587,-190.8149 133.587,-190.8149 131.5132,-186.2652 129.4923,-192.6813 129.4394,-181.7156 129.4394,-181.7156"/>
</g>
<!-- veth0 -->
<g id="node4" class="node">
<title>veth0</title>
<polygon fill="#c0c0c0" stroke="#c0c0c0" points="150,-108.4 96,-108.4 96,-72.4 150,-72.4 150,-108.4"/>
<text text-anchor="middle" x="123" y="-86.8" font-family="Times,serif" font-size="12.00" fill="#000000">veth0</text>
</g>
<!-- nps&#45;&gt;veth0 -->
<g id="edge3" class="edge">
<title>nps-&gt;veth0</title>
<path fill="none" stroke="#000000" stroke-dasharray="1,5" d="M165.4641,-217.5484C170.0129,-209.3539 174.7024,-199.3327 177,-189.6 181.5746,-170.2215 184.5857,-163.2095 177,-144.8 172.4514,-133.7611 164.4585,-123.778 155.9942,-115.4665"/>
<polygon fill="#000000" stroke="#000000" points="148.5092,-108.6083 158.9223,-112.0461 152.1957,-111.9861 155.8822,-115.364 155.8822,-115.364 155.8822,-115.364 152.1957,-111.9861 152.8422,-118.6818 148.5092,-108.6083 148.5092,-108.6083"/>
</g>
<!-- veth1 -->
<g id="node5" class="node">
<title>veth1</title>
<polygon fill="#c0c0c0" stroke="#c0c0c0" points="262.3354,-108.7005 167.6646,-108.7005 167.6646,-72.0995 262.3354,-72.0995 262.3354,-108.7005"/>
<text text-anchor="middle" x="215" y="-94" font-family="Times,serif" font-size="12.00" fill="#000000">192.168.1.11/24</text>
<text text-anchor="middle" x="215" y="-79.6" font-family="Times,serif" font-size="12.00" fill="#000000">veth1</text>
</g>
<!-- nps&#45;&gt;veth1 -->
<g id="edge4" class="edge">
<title>nps-&gt;veth1</title>
<path fill="none" stroke="#000000" d="M173.1734,-208.8933C177.0889,-202.7392 180.9415,-196.0901 184,-189.6 194.8077,-166.6664 203.0902,-139.0238 208.3637,-118.7501"/>
<polygon fill="#000000" stroke="#000000" points="167.4768,-217.4791 169.2558,-206.6584 170.2412,-213.3127 173.0055,-209.1463 173.0055,-209.1463 173.0055,-209.1463 170.2412,-213.3127 176.7552,-211.6343 167.4768,-217.4791 167.4768,-217.4791"/>
<polygon fill="#000000" stroke="#000000" points="210.8446,-108.8838 212.7701,-119.6793 209.6253,-113.7329 208.4059,-118.582 208.4059,-118.582 208.4059,-118.582 209.6253,-113.7329 204.0418,-117.4846 210.8446,-108.8838 210.8446,-108.8838"/>
</g>
<!-- pn -->
<g id="node6" class="node">
<title>pn</title>
<polygon fill="#c0c0c0" stroke="#c0c0c0" points="101.6434,-36 .3566,-36 .3566,0 101.6434,0 101.6434,-36"/>
<text text-anchor="middle" x="51" y="-14.4" font-family="Times,serif" font-size="12.00" fill="#000000">Physical Network</text>
</g>
<!-- eth0&#45;&gt;pn -->
<g id="edge7" class="edge">
<title>eth0-&gt;pn</title>
<path fill="none" stroke="#000000" d="M51,-61.9368C51,-56.752 51,-51.345 51,-46.1688"/>
<polygon fill="#000000" stroke="#000000" points="51,-72.1304 46.5001,-62.1304 51,-67.1304 51.0001,-62.1304 51.0001,-62.1304 51.0001,-62.1304 51,-67.1304 55.5001,-62.1305 51,-72.1304 51,-72.1304"/>
<polygon fill="#000000" stroke="#000000" points="51,-36.0129 55.5001,-46.0129 51,-41.0129 51.0001,-46.0129 51.0001,-46.0129 51.0001,-46.0129 51,-41.0129 46.5001,-46.013 51,-36.0129 51,-36.0129"/>
</g>
<!-- br0&#45;&gt;veth0 -->
<g id="edge5" class="edge">
<title>br0-&gt;veth0</title>
<path fill="none" stroke="#000000" d="M121.7863,-134.5796C121.9295,-129.3661 122.0789,-123.9293 122.2219,-118.7244"/>
<polygon fill="#000000" stroke="#000000" points="121.5047,-144.8295 117.2811,-134.7096 121.642,-139.8314 121.7794,-134.8333 121.7794,-134.8333 121.7794,-134.8333 121.642,-139.8314 126.2777,-134.9569 121.5047,-144.8295 121.5047,-144.8295"/>
<polygon fill="#000000" stroke="#000000" points="122.5024,-108.5124 126.726,-118.6323 122.365,-113.5106 122.2277,-118.5087 122.2277,-118.5087 122.2277,-118.5087 122.365,-113.5106 117.7294,-118.3851 122.5024,-108.5124 122.5024,-108.5124"/>
</g>
<!-- veth0&#45;&gt;veth1 -->
<g id="edge6" class="edge">
<title>veth0-&gt;veth1</title>
<path fill="none" stroke="#000000" d="M160.3923,-90.4C160.5455,-90.4 160.6988,-90.4 160.852,-90.4"/>
<polygon fill="#000000" stroke="#000000" points="150.3125,-90.4 160.3125,-85.9001 155.3125,-90.4 160.3125,-90.4001 160.3125,-90.4001 160.3125,-90.4001 155.3125,-90.4 160.3125,-94.9001 150.3125,-90.4 150.3125,-90.4"/>
<polygon fill="#000000" stroke="#000000" points="167.7478,-90.4 157.7479,-94.9001 162.7478,-90.4001 157.7478,-90.4001 157.7478,-90.4001 157.7478,-90.4001 162.7478,-90.4001 157.7477,-85.9001 167.7478,-90.4 167.7478,-90.4"/>
</g>
</g>
</svg>
</p><blockquote>
<p><code>veth0</code>&#x6CA1;&#x6709;&#x914D;&#x7F6E;IP&#xFF0C;&#x534F;&#x8BAE;&#x6808;&#x5C31;&#x4E0D;&#x4F1A;&#x5C06;&#x6570;&#x636E;&#x5305;&#x53D1;&#x7ED9;<code>veth0</code>&#xFF0C;&#x5373;&#x4F7F;&#x5F3A;&#x5236;&#x8981;&#x6C42;&#x6570;&#x636E;&#x5305;&#x901A;&#x8FC7;<code>veth0</code>&#x53D1;&#x9001;&#x51FA;&#x53BB;&#xFF0C;&#x54CD;&#x5E94;&#x7684;&#x6570;&#x636E;&#x4E5F;&#x53EA;&#x80FD;&#x6700;&#x7EC8;&#x7ED9;&#x5230;<code>br0</code>&#xFF0C;&#x534F;&#x8BAE;&#x6808;&#x662F;&#x65E0;&#x6CD5;&#x6536;&#x5230;&#x5E94;&#x7B54;&#x5305;&#x7684;&#x3002;&#x4F46;&#x534F;&#x8BAE;&#x6808;&#x8FD8;&#x662F;&#x548C;<code>veth0</code>&#x4E4B;&#x95F4;&#x6709;&#x8054;&#x7CFB;&#xFF0C;&#x6240;&#x4EE5;&#x56FE;&#x4E2D;&#x7528;&#x865A;&#x7EBF;&#x8868;&#x793A;&#x3002;&#x6700;&#x7EC8;&#xFF0C;&#x53EF;&#x4EE5;&#x7B80;&#x5355;&#x8BA4;&#x4E3A;<code>veth0</code>&#x5C31;&#x662F;&#x4E00;&#x6839;&#x7F51;&#x7EBF;&#x3002;</p>
</blockquote>
<p>&#x901A;&#x8FC7;<code>br0</code>ping<code>veth1</code>&#xFF0C;&#x6210;&#x529F;&#xFF1A;</p>
<pre data-role="codeBlock" data-info="bash" class="language-bash">$ <span class="token function">ping</span> -c 1 192.168.1.11 -I br0  
PING 192.168.1.11 <span class="token punctuation">(</span>192.168.1.11<span class="token punctuation">)</span> from 192.168.1.10 br0: 56<span class="token punctuation">(</span>84<span class="token punctuation">)</span> bytes of data.
64 bytes from 192.168.1.11: icmp_seq<span class="token operator">=</span>1 ttl<span class="token operator">=</span>64 time<span class="token operator">=</span>0.144 ms

--- 192.168.1.11 <span class="token function">ping</span> statistics ---
1 packets transmitted, 1 received, 0% packet loss, <span class="token function">time</span> 0ms
rtt min/avg/max/mdev <span class="token operator">=</span> 0.144/0.144/0.144/0.000 ms

$ tcpdump -n -i veth0
tcpdump: verbose output suppressed, use -v or -vv <span class="token keyword">for</span> full protocol decode
listening on veth0, link-type EN10MB <span class="token punctuation">(</span>Ethernet<span class="token punctuation">)</span>, capture size 262144 bytes
06:43:01.624722 IP 192.168.1.10 <span class="token operator">&gt;</span> 192.168.1.11: ICMP <span class="token keyword">echo</span> request, <span class="token function">id</span> 134, <span class="token function">seq</span> 1, length 64
06:43:01.624769 IP 192.168.1.11 <span class="token operator">&gt;</span> 192.168.1.10: ICMP <span class="token keyword">echo</span> reply, <span class="token function">id</span> 134, <span class="token function">seq</span> 1, length 64
06:43:06.627103 ARP, Request who-has 192.168.1.11 tell 192.168.1.10, length 28
06:43:06.627121 ARP, Request who-has 192.168.1.10 tell 192.168.1.11, length 28
06:43:06.627137 ARP, Reply 192.168.1.10 is-at 9a:28:dd:bb:a5:c8, length 28
06:43:06.627148 ARP, Reply 192.168.1.11 is-at 5a:14:87:18:10:71, length 28

$ <span class="token function">ip</span> netns <span class="token function">exec</span> ns1 tcpdump -n -i veth1
tcpdump: verbose output suppressed, use -v or -vv <span class="token keyword">for</span> full protocol decode
listening on veth1, link-type EN10MB <span class="token punctuation">(</span>Ethernet<span class="token punctuation">)</span>, capture size 262144 bytes
06:43:01.624747 IP 192.168.1.10 <span class="token operator">&gt;</span> 192.168.1.11: ICMP <span class="token keyword">echo</span> request, <span class="token function">id</span> 134, <span class="token function">seq</span> 1, length 64
06:43:01.624767 IP 192.168.1.11 <span class="token operator">&gt;</span> 192.168.1.10: ICMP <span class="token keyword">echo</span> reply, <span class="token function">id</span> 134, <span class="token function">seq</span> 1, length 64
06:43:06.627041 ARP, Request who-has 192.168.1.10 tell 192.168.1.11, length 28
06:43:06.627140 ARP, Request who-has 192.168.1.11 tell 192.168.1.10, length 28
06:43:06.627143 ARP, Reply 192.168.1.11 is-at 5a:14:87:18:10:71, length 28
06:43:06.627145 ARP, Reply 192.168.1.10 is-at 9a:28:dd:bb:a5:c8, length 28

$ tcpdump -n -i br0
tcpdump: verbose output suppressed, use -v or -vv <span class="token keyword">for</span> full protocol decode
listening on br0, link-type EN10MB <span class="token punctuation">(</span>Ethernet<span class="token punctuation">)</span>, capture size 262144 bytes
06:43:01.624681 IP 192.168.1.10 <span class="token operator">&gt;</span> 192.168.1.11: ICMP <span class="token keyword">echo</span> request, <span class="token function">id</span> 134, <span class="token function">seq</span> 1, length 64
06:43:01.624775 IP 192.168.1.11 <span class="token operator">&gt;</span> 192.168.1.10: ICMP <span class="token keyword">echo</span> reply, <span class="token function">id</span> 134, <span class="token function">seq</span> 1, length 64
06:43:06.627091 ARP, Request who-has 192.168.1.11 tell 192.168.1.10, length 28
06:43:06.627128 ARP, Request who-has 192.168.1.10 tell 192.168.1.11, length 28
06:43:06.627135 ARP, Reply 192.168.1.10 is-at 9a:28:dd:bb:a5:c8, length 28
06:43:06.627150 ARP, Reply 192.168.1.11 is-at 5a:14:87:18:10:71, length 28
</pre><h3 class="mume-header" id="bridge%E5%BF%85%E9%A1%BB%E8%A6%81%E9%85%8D%E7%BD%AEip%E5%90%97" ebook-toc-level-3 heading="bridge&amp;#x5FC5;&amp;#x987B;&amp;#x8981;&amp;#x914D;&amp;#x7F6E;IP&amp;#x5417;">bridge&#x5FC5;&#x987B;&#x8981;&#x914D;&#x7F6E;IP&#x5417;</h3>

<p>&#x5728;&#x6211;&#x4EEC;&#x5E38;&#x89C1;&#x7684;&#x7269;&#x7406;&#x4EA4;&#x6362;&#x673A;&#x4E2D;&#xFF0C;&#x6709;&#x53EF;&#x4EE5;&#x914D;&#x7F6E;IP&#x548C;&#x4E0D;&#x80FD;&#x914D;&#x7F6E;IP&#x4E24;&#x79CD;&#xFF0C;&#x4E0D;&#x80FD;&#x914D;&#x7F6E;IP&#x7684;&#x4EA4;&#x6362;&#x673A;&#x4E00;&#x822C;&#x901A;&#x8FC7;com&#x53E3;&#x8FDE;&#x4E0A;&#x53BB;&#x505A;&#x914D;&#x7F6E;&#xFF08;&#x66F4;&#x7B80;&#x5355;&#x7684;&#x4EA4;&#x6362;&#x673A;&#x8FDE;com&#x53E3;&#x7684;&#x6CA1;&#x6709;&#xFF0C;&#x4E0D;&#x652F;&#x6301;&#x4EFB;&#x4F55;&#x914D;&#x7F6E;&#xFF09;&#xFF0C;&#x800C;&#x80FD;&#x914D;&#x7F6E;IP&#x7684;&#x4EA4;&#x6362;&#x673A;&#x53EF;&#x4EE5;&#x5728;&#x914D;&#x7F6E;&#x597D;IP&#x4E4B;&#x540E;&#xFF0C;&#x901A;&#x8FC7;&#x8BE5;IP&#x8FDC;&#x7A0B;&#x8FDE;&#x63A5;&#x4E0A;&#x53BB;&#x505A;&#x914D;&#x7F6E;&#xFF0C;&#x4ECE;&#x800C;&#x66F4;&#x65B9;&#x4FBF;&#x3002;</p>
<p>bridge&#x5C31;&#x5C5E;&#x4E8E;&#x540E;&#x4E00;&#x79CD;&#x4EA4;&#x6362;&#x673A;&#xFF0C;&#x81EA;&#x5E26;&#x865A;&#x62DF;&#x7F51;&#x5361;&#xFF0C;&#x53EF;&#x4EE5;&#x914D;&#x7F6E;IP&#xFF0C;&#x8BE5;&#x865A;&#x62DF;&#x7F51;&#x5361;&#x4E00;&#x7AEF;&#x8FDE;&#x5728;bridge&#x4E0A;&#xFF0C;&#x53E6;&#x4E00;&#x7AEF;&#x8DDF;&#x534F;&#x8BAE;&#x6808;&#x76F8;&#x8FDE;&#x3002;&#x548C;&#x7269;&#x7406;&#x4EA4;&#x6362;&#x673A;&#x4E00;&#x6837;&#xFF0C;bridge&#x7684;&#x5DE5;&#x4F5C;&#x4E0D;&#x4F9D;&#x8D56;&#x4E8E;&#x8BE5;&#x865A;&#x62DF;&#x7F51;&#x5361;&#xFF0C;&#x4F46;bridge&#x5DE5;&#x4F5C;&#x4E0D;&#x4EE3;&#x8868;&#x673A;&#x5668;&#x80FD;&#x8FDE;&#x4E0A;&#x7F51;&#xFF0C;&#x8981;&#x770B;&#x7EC4;&#x7F51;&#x65B9;&#x5F0F;&#x3002;</p>
<p>&#x5982;&#x679C;&#x6211;&#x4EEC;&#x628A;&#x7269;&#x7406;&#x7F51;&#x5361;&#x52A0;&#x5165;<code>br0</code>&#xFF0C;&#x5220;&#x9664;<code>br0</code>&#x7684;IP&#xFF0C;&#x5219;&#x7F51;&#x7EDC;&#x7ED3;&#x6784;&#x5982;&#x4E0B;&#xFF1A;</p>
<p><!--?xml version="1.0" encoding="UTF-8" standalone="no"?-->

<!-- Generated by graphviz version 2.40.1 (20161225.0304)
 -->
<!-- Title: G Pages: 1 -->
<svg width="366pt" height="213pt" viewBox="0.00 0.00 366.00 212.80" xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 208.8)">
<title>G</title>
<polygon fill="#ffffff" stroke="transparent" points="-4,4 -4,-208.8 362,-208.8 362,4 -4,4"/>
<g id="clust1" class="cluster">
<title>cluster0</title>
<polygon fill="none" stroke="#000000" points="8,-56 8,-196.8 350,-196.8 350,-56 8,-56"/>
</g>
<g id="clust2" class="cluster">
<title>cluster1</title>
<polygon fill="none" stroke="#000000" points="85,-136.8 85,-188.8 233,-188.8 233,-136.8 85,-136.8"/>
</g>
<g id="clust4" class="cluster">
<title>cluster2</title>
<polygon fill="none" stroke="#000000" points="16,-64 16,-116.8 342,-116.8 342,-64 16,-64"/>
</g>
<!-- nps -->
<g id="node1" class="node">
<title>nps</title>
<polygon fill="#c0c0c0" stroke="#c0c0c0" points="224.8036,-180.8 93.1964,-180.8 93.1964,-144.8 224.8036,-144.8 224.8036,-180.8"/>
<text text-anchor="middle" x="159" y="-159.2" font-family="Times,serif" font-size="12.00" fill="#000000">Network Protocol Stack</text>
</g>
<!-- eth0 -->
<g id="node2" class="node">
<title>eth0</title>
<polygon fill="#c0c0c0" stroke="#c0c0c0" points="78,-108.4 24,-108.4 24,-72.4 78,-72.4 78,-108.4"/>
<text text-anchor="middle" x="51" y="-86.8" font-family="Times,serif" font-size="12.00" fill="#000000">eth0</text>
</g>
<!-- nps&#45;&gt;eth0 -->
<g id="edge1" class="edge">
<title>nps-&gt;eth0</title>
<path fill="none" stroke="#000000" stroke-dasharray="1,5" d="M129.6449,-144.6432C116.4769,-136.3459 100.828,-126.2732 87,-116.8 85.921,-116.0608 84.8279,-115.3044 83.7271,-114.5362"/>
<polygon fill="#000000" stroke="#000000" points="75.2479,-108.5074 86.0055,-110.6347 79.3229,-111.4048 83.3979,-114.3021 83.3979,-114.3021 83.3979,-114.3021 79.3229,-111.4048 80.7903,-117.9696 75.2479,-108.5074 75.2479,-108.5074"/>
</g>
<!-- br0 -->
<g id="node3" class="node">
<title>br0</title>
<polygon fill="#c0c0c0" stroke="#c0c0c0" points="150,-108.4 96,-108.4 96,-72.4 150,-72.4 150,-108.4"/>
<text text-anchor="middle" x="123" y="-86.8" font-family="Times,serif" font-size="12.00" fill="#000000">br0</text>
</g>
<!-- nps&#45;&gt;br0 -->
<g id="edge2" class="edge">
<title>nps-&gt;br0</title>
<path fill="none" stroke="#000000" stroke-dasharray="1,5" d="M149.9157,-144.5304C145.8344,-136.3225 140.935,-126.4693 136.4414,-117.4321"/>
<polygon fill="#000000" stroke="#000000" points="131.9567,-108.4129 140.4385,-115.3635 134.1829,-112.89 136.4091,-117.3671 136.4091,-117.3671 136.4091,-117.3671 134.1829,-112.89 132.3797,-119.3707 131.9567,-108.4129 131.9567,-108.4129"/>
</g>
<!-- veth0 -->
<g id="node4" class="node">
<title>veth0</title>
<polygon fill="#c0c0c0" stroke="#c0c0c0" points="222,-108.4 168,-108.4 168,-72.4 222,-72.4 222,-108.4"/>
<text text-anchor="middle" x="195" y="-86.8" font-family="Times,serif" font-size="12.00" fill="#000000">veth0</text>
</g>
<!-- nps&#45;&gt;veth0 -->
<g id="edge3" class="edge">
<title>nps-&gt;veth0</title>
<path fill="none" stroke="#000000" stroke-dasharray="1,5" d="M168.0843,-144.5304C172.1656,-136.3225 177.065,-126.4693 181.5586,-117.4321"/>
<polygon fill="#000000" stroke="#000000" points="186.0433,-108.4129 185.6203,-119.3707 183.8171,-112.89 181.5909,-117.3671 181.5909,-117.3671 181.5909,-117.3671 183.8171,-112.89 177.5615,-115.3635 186.0433,-108.4129 186.0433,-108.4129"/>
</g>
<!-- veth1 -->
<g id="node5" class="node">
<title>veth1</title>
<polygon fill="#c0c0c0" stroke="#c0c0c0" points="334.3354,-108.7005 239.6646,-108.7005 239.6646,-72.0995 334.3354,-72.0995 334.3354,-108.7005"/>
<text text-anchor="middle" x="287" y="-94" font-family="Times,serif" font-size="12.00" fill="#000000">192.168.1.11/24</text>
<text text-anchor="middle" x="287" y="-79.6" font-family="Times,serif" font-size="12.00" fill="#000000">veth1</text>
</g>
<!-- nps&#45;&gt;veth1 -->
<g id="edge4" class="edge">
<title>nps-&gt;veth1</title>
<path fill="none" stroke="#000000" d="M199.9244,-139.6522C214.5503,-131.3794 231.0326,-122.0565 245.6908,-113.7655"/>
<polygon fill="#000000" stroke="#000000" points="190.9696,-144.7172 197.4583,-135.877 195.3217,-142.2555 199.6737,-139.7939 199.6737,-139.7939 199.6737,-139.7939 195.3217,-142.2555 201.8892,-143.7107 190.9696,-144.7172 190.9696,-144.7172"/>
<polygon fill="#000000" stroke="#000000" points="254.549,-108.7551 248.0603,-117.5953 250.1969,-111.2168 245.8448,-113.6784 245.8448,-113.6784 245.8448,-113.6784 250.1969,-111.2168 243.6293,-109.7616 254.549,-108.7551 254.549,-108.7551"/>
</g>
<!-- eth0&#45;&gt;br0 -->
<g id="edge7" class="edge">
<title>eth0-&gt;br0</title>
<path fill="none" stroke="#000000" d="M88.3801,-90.4C88.5336,-90.4 88.6871,-90.4 88.8407,-90.4"/>
<polygon fill="#000000" stroke="#000000" points="78.2813,-90.4 88.2813,-85.9001 83.2813,-90.4 88.2813,-90.4001 88.2813,-90.4001 88.2813,-90.4001 83.2813,-90.4 88.2812,-94.9001 78.2813,-90.4 78.2813,-90.4"/>
<polygon fill="#000000" stroke="#000000" points="95.7495,-90.4 85.7496,-94.9001 90.7495,-90.4001 85.7495,-90.4001 85.7495,-90.4001 85.7495,-90.4001 90.7495,-90.4001 85.7494,-85.9001 95.7495,-90.4 95.7495,-90.4"/>
</g>
<!-- pn -->
<g id="node6" class="node">
<title>pn</title>
<polygon fill="#c0c0c0" stroke="#c0c0c0" points="101.6434,-36 .3566,-36 .3566,0 101.6434,0 101.6434,-36"/>
<text text-anchor="middle" x="51" y="-14.4" font-family="Times,serif" font-size="12.00" fill="#000000">Physical Network</text>
</g>
<!-- eth0&#45;&gt;pn -->
<g id="edge8" class="edge">
<title>eth0-&gt;pn</title>
<path fill="none" stroke="#000000" d="M51,-61.9368C51,-56.752 51,-51.345 51,-46.1688"/>
<polygon fill="#000000" stroke="#000000" points="51,-72.1304 46.5001,-62.1304 51,-67.1304 51.0001,-62.1304 51.0001,-62.1304 51.0001,-62.1304 51,-67.1304 55.5001,-62.1305 51,-72.1304 51,-72.1304"/>
<polygon fill="#000000" stroke="#000000" points="51,-36.0129 55.5001,-46.0129 51,-41.0129 51.0001,-46.0129 51.0001,-46.0129 51.0001,-46.0129 51,-41.0129 46.5001,-46.013 51,-36.0129 51,-36.0129"/>
</g>
<!-- br0&#45;&gt;veth0 -->
<g id="edge5" class="edge">
<title>br0-&gt;veth0</title>
<path fill="none" stroke="#000000" d="M160.3801,-90.4C160.5336,-90.4 160.6871,-90.4 160.8407,-90.4"/>
<polygon fill="#000000" stroke="#000000" points="150.2813,-90.4 160.2813,-85.9001 155.2813,-90.4 160.2813,-90.4001 160.2813,-90.4001 160.2813,-90.4001 155.2813,-90.4 160.2812,-94.9001 150.2813,-90.4 150.2813,-90.4"/>
<polygon fill="#000000" stroke="#000000" points="167.7495,-90.4 157.7496,-94.9001 162.7495,-90.4001 157.7495,-90.4001 157.7495,-90.4001 157.7495,-90.4001 162.7495,-90.4001 157.7494,-85.9001 167.7495,-90.4 167.7495,-90.4"/>
</g>
<!-- veth0&#45;&gt;veth1 -->
<g id="edge6" class="edge">
<title>veth0-&gt;veth1</title>
<path fill="none" stroke="#000000" d="M232.3923,-90.4C232.5455,-90.4 232.6988,-90.4 232.852,-90.4"/>
<polygon fill="#000000" stroke="#000000" points="222.3125,-90.4 232.3125,-85.9001 227.3125,-90.4 232.3125,-90.4001 232.3125,-90.4001 232.3125,-90.4001 227.3125,-90.4 232.3125,-94.9001 222.3125,-90.4 222.3125,-90.4"/>
<polygon fill="#000000" stroke="#000000" points="239.7478,-90.4 229.7479,-94.9001 234.7478,-90.4001 229.7478,-90.4001 229.7478,-90.4001 229.7478,-90.4001 234.7478,-90.4001 229.7477,-85.9001 239.7478,-90.4 239.7478,-90.4"/>
</g>
</g>
</svg>
</p><blockquote>
<p>&#x4E0A;&#x9762;&#x5982;&#x679C;&#x6CA1;&#x6709;veth0&#x548C;veth1&#x7684;&#x8BDD;&#xFF0C;&#x5220;&#x9664;br0&#x4E0A;&#x7684;IP&#x540E;&#xFF0C;&#x7F51;&#x7EDC;&#x5C06;&#x4F1A;&#x4E0D;&#x901A;&#xFF0C;&#x56E0;&#x4E3A;&#x6CA1;&#x6709;&#x8BBE;&#x5907;&#x548C;&#x534F;&#x8BAE;&#x6808;&#x5B8C;&#x5168;&#x76F8;&#x8FDE;</p>
</blockquote>
<h3 ebook-toc-level-3 heading="bridge&amp;#x5E38;&amp;#x7528;&amp;#x573A;&amp;#x666F;">bridge&#x5E38;&#x7528;&#x573A;&#x666F;</h3>
<p>&#x4E0A;&#x9762;&#x901A;&#x8FC7;&#x4F8B;&#x5B50;&#x5C55;&#x793A;&#x4E86;bridge&#x7684;&#x529F;&#x80FD;&#xFF0C;&#x4F46;&#x4F8B;&#x5B50;&#x4E2D;&#x7684;&#x90A3;&#x79CD;&#x90E8;&#x7F72;&#x65B9;&#x5F0F;&#x6CA1;&#x6709;&#x4EC0;&#x4E48;&#x5B9E;&#x9645;&#x7528;&#x9014;&#xFF0C;&#x8FD8;&#x4E0D;&#x5982;&#x5728;&#x4E00;&#x4E2A;&#x7F51;&#x5361;&#x4E0A;&#x914D;&#x7F6E;&#x591A;&#x4E2A;IP&#x5730;&#x5740;&#x6765;&#x7684;&#x76F4;&#x63A5;&#x3002;&#x8FD9;&#x91CC;&#x6765;&#x4ECB;&#x7ECD;&#x4E24;&#x79CD;&#x5E38;&#x89C1;&#x7684;&#x90E8;&#x7F72;&#x65B9;&#x5F0F;&#x3002;</p>
<h4 ebook-toc-level-4 heading="&amp;#x865A;&amp;#x62DF;&amp;#x673A;">&#x865A;&#x62DF;&#x673A;</h4>
<p>&#x865A;&#x62DF;&#x673A;&#x901A;&#x8FC7;tun/tap&#x6216;&#x8005;&#x5176;&#x5B83;&#x7C7B;&#x4F3C;&#x7684;&#x865A;&#x62DF;&#x7F51;&#x7EDC;&#x8BBE;&#x5907;&#xFF0C;&#x5C06;&#x865A;&#x62DF;&#x673A;&#x5185;&#x7684;&#x7F51;&#x5361;&#x540C;br0&#x8FDE;&#x63A5;&#x8D77;&#x6765;&#xFF0C;&#x8FD9;&#x6837;&#x5C31;&#x8FBE;&#x5230;&#x548C;&#x771F;&#x5B9E;&#x4EA4;&#x6362;&#x673A;&#x4E00;&#x6837;&#x7684;&#x6548;&#x679C;&#xFF0C;&#x865A;&#x62DF;&#x673A;&#x53D1;&#x51FA;&#x53BB;&#x7684;&#x6570;&#x636E;&#x5305;&#x5148;&#x5230;&#x8FBE;br0&#xFF0C;&#x7136;&#x540E;&#x7531;br0&#x4EA4;&#x7ED9;eth0&#x53D1;&#x9001;&#x51FA;&#x53BB;&#xFF0C;&#x6570;&#x636E;&#x5305;&#x90FD;&#x4E0D;&#x9700;&#x8981;&#x7ECF;&#x8FC7;host&#x673A;&#x5668;&#x7684;&#x534F;&#x8BAE;&#x6808;&#xFF0C;&#x6548;&#x7387;&#x9AD8;&#x3002;</p>
<h4 ebook-toc-level-4 heading="docker">docker</h4>
<p>&#x7531;&#x4E8E;&#x5BB9;&#x5668;&#x8FD0;&#x884C;&#x5728;&#x81EA;&#x5DF1;&#x5355;&#x72EC;&#x7684;network namespace&#x91CC;&#x9762;&#xFF0C;&#x6240;&#x4EE5;&#x90FD;&#x6709;&#x81EA;&#x5DF1;&#x5355;&#x72EC;&#x7684;&#x534F;&#x8BAE;&#x6808;&#xFF0C;&#x60C5;&#x51B5;&#x548C;&#x4E0A;&#x9762;&#x7684;&#x865A;&#x62DF;&#x673A;&#x5DEE;&#x4E0D;&#x591A;&#xFF0C;&#x4F46;&#x5B83;&#x91C7;&#x7528;&#x4E86;&#x53E6;&#x4E00;&#x79CD;&#x65B9;&#x5F0F;&#x6765;&#x548C;&#x5916;&#x754C;&#x901A;&#x4FE1;&#xFF1A;</p>
<p><!--?xml version="1.0" encoding="UTF-8" standalone="no"?-->

<!-- Generated by graphviz version 2.40.1 (20161225.0304)
 -->
<!-- Title: G Pages: 1 -->
<svg width="261pt" height="415pt" viewBox="0.00 0.00 261.30 415.40" xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 411.4)">
<title>G</title>
<polygon fill="#ffffff" stroke="transparent" points="-4,4 -4,-411.4 257.3032,-411.4 257.3032,4 -4,4"/>
<g id="clust1" class="cluster">
<title>cluster_host</title>
<polygon fill="none" stroke="#000000" points="8,-178 8,-363 245.3032,-363 245.3032,-178 8,-178"/>
<text text-anchor="middle" x="126.6516" y="-346.4" font-family="Times,serif" font-size="14.00" fill="#000000">HOST</text>
</g>
<g id="clust3" class="cluster">
<title>cluster_c2</title>
<polygon fill="none" stroke="#000000" points="8,-8 8,-85 245.3032,-85 245.3032,-8 8,-8"/>
<text text-anchor="middle" x="126.6516" y="-68.4" font-family="Times,serif" font-size="14.00" fill="#000000">Container 2</text>
</g>
<g id="clust2" class="cluster">
<title>cluster_c1</title>
<polygon fill="none" stroke="#000000" points="8,-93 8,-170 245.3032,-170 245.3032,-93 8,-93"/>
<text text-anchor="middle" x="126.6516" y="-153.4" font-family="Times,serif" font-size="14.00" fill="#000000">Container 1</text>
</g>
<!-- nps -->
<g id="node1" class="node">
<title>nps</title>
<polygon fill="#c0c0c0" stroke="#c0c0c0" points="147.4552,-330 15.848,-330 15.848,-294 147.4552,-294 147.4552,-330"/>
<text text-anchor="middle" x="81.6516" y="-308.4" font-family="Times,serif" font-size="12.00" fill="#000000">Network Protocol Stack</text>
</g>
<!-- eth0 -->
<g id="node2" class="node">
<title>eth0</title>
<polygon fill="#c0c0c0" stroke="#c0c0c0" points="237.3032,-330.3005 183.3032,-330.3005 183.3032,-293.6995 237.3032,-293.6995 237.3032,-330.3005"/>
<text text-anchor="middle" x="210.3032" y="-315.6" font-family="Times,serif" font-size="12.00" fill="#000000">.3.101</text>
<text text-anchor="middle" x="210.3032" y="-301.2" font-family="Times,serif" font-size="12.00" fill="#000000">eth0</text>
</g>
<!-- nps&#45;&gt;eth0 -->
<g id="edge1" class="edge">
<title>nps-&gt;eth0</title>
<path fill="none" stroke="#000000" d="M157.7733,-312C162.9921,-312 168.1035,-312 172.9639,-312"/>
<polygon fill="#000000" stroke="#000000" points="147.4849,-312 157.485,-307.5001 152.4849,-312 157.4849,-312.0001 157.4849,-312.0001 157.4849,-312.0001 152.4849,-312 157.4849,-316.5001 147.4849,-312 147.4849,-312"/>
<polygon fill="#000000" stroke="#000000" points="183.1473,-312 173.1473,-316.5001 178.1473,-312 173.1473,-312.0001 173.1473,-312.0001 173.1473,-312.0001 178.1473,-312 173.1472,-307.5001 183.1473,-312 183.1473,-312"/>
</g>
<!-- br0 -->
<g id="node3" class="node">
<title>br0</title>
<polygon fill="#c0c0c0" stroke="#c0c0c0" points="237.3032,-275.3005 183.3032,-275.3005 183.3032,-238.6995 237.3032,-238.6995 237.3032,-275.3005"/>
<text text-anchor="middle" x="210.3032" y="-260.6" font-family="Times,serif" font-size="12.00" fill="#000000">.9.1</text>
<text text-anchor="middle" x="210.3032" y="-246.2" font-family="Times,serif" font-size="12.00" fill="#000000">br0</text>
</g>
<!-- nps&#45;&gt;br0 -->
<g id="edge2" class="edge">
<title>nps-&gt;br0</title>
<path fill="none" stroke="#000000" d="M135.5338,-289.9829C139.522,-288.3096 143.479,-286.6358 147.3032,-285 155.9504,-281.3011 165.2248,-277.2349 173.9265,-273.3754"/>
<polygon fill="#000000" stroke="#000000" points="126.219,-293.8683 133.7159,-285.8653 130.8336,-291.9434 135.4483,-290.0185 135.4483,-290.0185 135.4483,-290.0185 130.8336,-291.9434 137.1807,-294.1717 126.219,-293.8683 126.219,-293.8683"/>
<polygon fill="#000000" stroke="#000000" points="183.0874,-269.2956 175.7831,-277.4747 178.5199,-271.3298 173.9524,-273.3639 173.9524,-273.3639 173.9524,-273.3639 178.5199,-271.3298 172.1216,-269.2532 183.0874,-269.2956 183.0874,-269.2956"/>
</g>
<!-- veth_1 -->
<g id="node4" class="node">
<title>veth_1</title>
<polygon fill="#c0c0c0" stroke="#c0c0c0" points="108.6516,-276 54.6516,-276 54.6516,-240 108.6516,-240 108.6516,-276"/>
<text text-anchor="middle" x="81.6516" y="-254.4" font-family="Times,serif" font-size="12.00" fill="#000000">veth</text>
</g>
<!-- veth_1&#45;&gt;br0 -->
<g id="edge3" class="edge">
<title>veth_1-&gt;br0</title>
<path fill="none" stroke="#000000" d="M119.172,-257.7084C136.1078,-257.5767 156.0626,-257.4216 172.9755,-257.2901"/>
<polygon fill="#000000" stroke="#000000" points="108.9353,-257.7879 118.9,-253.2102 113.9351,-257.749 118.935,-257.7101 118.935,-257.7101 118.935,-257.7101 113.9351,-257.749 118.97,-262.21 108.9353,-257.7879 108.9353,-257.7879"/>
<polygon fill="#000000" stroke="#000000" points="183.0588,-257.2118 173.0942,-261.7895 178.059,-257.2507 173.0591,-257.2896 173.0591,-257.2896 173.0591,-257.2896 178.059,-257.2507 173.0241,-252.7897 183.0588,-257.2118 183.0588,-257.2118"/>
</g>
<!-- eth01 -->
<g id="node8" class="node">
<title>eth01</title>
<polygon fill="#c0c0c0" stroke="#c0c0c0" points="237.3032,-137.3005 183.3032,-137.3005 183.3032,-100.6995 237.3032,-100.6995 237.3032,-137.3005"/>
<text text-anchor="middle" x="210.3032" y="-122.6" font-family="Times,serif" font-size="12.00" fill="#000000">.9.2</text>
<text text-anchor="middle" x="210.3032" y="-108.2" font-family="Times,serif" font-size="12.00" fill="#000000">eth0</text>
</g>
<!-- veth_1&#45;&gt;eth01 -->
<g id="edge8" class="edge">
<title>veth_1-&gt;eth01</title>
<path fill="none" stroke="#000000" d="M118.3839,-247.857C128.5512,-243.7974 139.0492,-238.3022 147.3032,-231 154.3824,-224.7371 179.6972,-177.6847 196.0019,-146.5916"/>
<polygon fill="#000000" stroke="#000000" points="108.8212,-251.3214 116.6904,-243.6842 113.5222,-249.6183 118.2232,-247.9151 118.2232,-247.9151 118.2232,-247.9151 113.5222,-249.6183 119.7561,-252.146 108.8212,-251.3214 108.8212,-251.3214"/>
<polygon fill="#000000" stroke="#000000" points="200.7425,-137.5172 200.1006,-148.4643 198.4273,-141.9489 196.1121,-146.3806 196.1121,-146.3806 196.1121,-146.3806 198.4273,-141.9489 192.1235,-144.2969 200.7425,-137.5172 200.7425,-137.5172"/>
</g>
<!-- veth_2 -->
<g id="node5" class="node">
<title>veth_2</title>
<polygon fill="#c0c0c0" stroke="#c0c0c0" points="108.6516,-222 54.6516,-222 54.6516,-186 108.6516,-186 108.6516,-222"/>
<text text-anchor="middle" x="81.6516" y="-200.4" font-family="Times,serif" font-size="12.00" fill="#000000">veth</text>
</g>
<!-- veth_2&#45;&gt;br0 -->
<g id="edge4" class="edge">
<title>veth_2-&gt;br0</title>
<path fill="none" stroke="#000000" d="M118.3292,-219.0748C127.7713,-222.9581 137.9157,-227.1325 147.3032,-231 155.8084,-234.504 164.9579,-238.2775 173.5759,-241.8338"/>
<polygon fill="#000000" stroke="#000000" points="108.805,-215.1584 119.765,-214.7997 113.4293,-217.06 118.0536,-218.9615 118.0536,-218.9615 118.0536,-218.9615 113.4293,-217.06 116.3422,-223.1234 108.805,-215.1584 108.805,-215.1584"/>
<polygon fill="#000000" stroke="#000000" points="183.0175,-245.7307 172.057,-246.0751 178.3957,-243.8231 173.7738,-241.9155 173.7738,-241.9155 173.7738,-241.9155 178.3957,-243.8231 175.4907,-237.7558 183.0175,-245.7307 183.0175,-245.7307"/>
</g>
<!-- eth02 -->
<g id="node10" class="node">
<title>eth02</title>
<polygon fill="#c0c0c0" stroke="#c0c0c0" points="237.3032,-52.3005 183.3032,-52.3005 183.3032,-15.6995 237.3032,-15.6995 237.3032,-52.3005"/>
<text text-anchor="middle" x="210.3032" y="-37.6" font-family="Times,serif" font-size="12.00" fill="#000000">.9.3</text>
<text text-anchor="middle" x="210.3032" y="-23.2" font-family="Times,serif" font-size="12.00" fill="#000000">eth0</text>
</g>
<!-- veth_2&#45;&gt;eth02 -->
<g id="edge9" class="edge">
<title>veth_2-&gt;eth02</title>
<path fill="none" stroke="#000000" d="M118.1078,-192.9967C128.5557,-188.4479 139.2768,-182.2543 147.3032,-174 175.9042,-144.5867 166.257,-126.3174 183.3032,-89 187.4252,-79.9761 192.1275,-70.2273 196.44,-61.4795"/>
<polygon fill="#000000" stroke="#000000" points="108.6747,-196.7237 116.3215,-188.8639 113.3249,-194.8864 117.9751,-193.0491 117.9751,-193.0491 117.9751,-193.0491 113.3249,-194.8864 119.6287,-197.2342 108.6747,-196.7237 108.6747,-196.7237"/>
<polygon fill="#000000" stroke="#000000" points="200.9208,-52.4618 200.5009,-63.4196 198.6958,-56.9395 196.4709,-61.4172 196.4709,-61.4172 196.4709,-61.4172 198.6958,-56.9395 192.441,-59.4148 200.9208,-52.4618 200.9208,-52.4618"/>
</g>
<!-- pn -->
<g id="node6" class="node">
<title>pn</title>
<polygon fill="#c0c0c0" stroke="#c0c0c0" points="132.295,-407.3005 31.0082,-407.3005 31.0082,-370.6995 132.295,-370.6995 132.295,-407.3005"/>
<text text-anchor="middle" x="81.6516" y="-392.6" font-family="Times,serif" font-size="12.00" fill="#000000">.3.0/24</text>
<text text-anchor="middle" x="81.6516" y="-378.2" font-family="Times,serif" font-size="12.00" fill="#000000">Physical Network</text>
</g>
<!-- pn&#45;&gt;eth0 -->
<g id="edge5" class="edge">
<title>pn-&gt;eth0</title>
<path fill="none" stroke="#000000" d="M141.8786,-369.9149C143.7302,-368.9803 145.5434,-368.0088 147.3032,-367 161.0882,-359.0977 174.6004,-347.9005 185.5538,-337.6697"/>
<polygon fill="#000000" stroke="#000000" points="132.3664,-374.2831 139.576,-366.0204 136.9102,-372.1965 141.454,-370.1098 141.454,-370.1098 141.454,-370.1098 136.9102,-372.1965 143.332,-374.1992 132.3664,-374.2831 132.3664,-374.2831"/>
<polygon fill="#000000" stroke="#000000" points="193.0448,-330.4518 188.9661,-340.631 189.4442,-333.9212 185.8437,-337.3905 185.8437,-337.3905 185.8437,-337.3905 189.4442,-333.9212 182.7213,-334.15 193.0448,-330.4518 193.0448,-330.4518"/>
</g>
<!-- nps1 -->
<g id="node7" class="node">
<title>nps1</title>
<polygon fill="#c0c0c0" stroke="#c0c0c0" points="147.4552,-137 15.848,-137 15.848,-101 147.4552,-101 147.4552,-137"/>
<text text-anchor="middle" x="81.6516" y="-115.4" font-family="Times,serif" font-size="12.00" fill="#000000">Network Protocol Stack</text>
</g>
<!-- nps1&#45;&gt;eth01 -->
<g id="edge6" class="edge">
<title>nps1-&gt;eth01</title>
<path fill="none" stroke="#000000" d="M157.7733,-119C162.9921,-119 168.1035,-119 172.9639,-119"/>
<polygon fill="#000000" stroke="#000000" points="147.4849,-119 157.485,-114.5001 152.4849,-119 157.4849,-119.0001 157.4849,-119.0001 157.4849,-119.0001 152.4849,-119 157.4849,-123.5001 147.4849,-119 147.4849,-119"/>
<polygon fill="#000000" stroke="#000000" points="183.1473,-119 173.1473,-123.5001 178.1473,-119 173.1473,-119.0001 173.1473,-119.0001 173.1473,-119.0001 178.1473,-119 173.1472,-114.5001 183.1473,-119 183.1473,-119"/>
</g>
<!-- nps2 -->
<g id="node9" class="node">
<title>nps2</title>
<polygon fill="#c0c0c0" stroke="#c0c0c0" points="147.4552,-52 15.848,-52 15.848,-16 147.4552,-16 147.4552,-52"/>
<text text-anchor="middle" x="81.6516" y="-30.4" font-family="Times,serif" font-size="12.00" fill="#000000">Network Protocol Stack</text>
</g>
<!-- nps2&#45;&gt;eth02 -->
<g id="edge7" class="edge">
<title>nps2-&gt;eth02</title>
<path fill="none" stroke="#000000" d="M157.7733,-34C162.9921,-34 168.1035,-34 172.9639,-34"/>
<polygon fill="#000000" stroke="#000000" points="147.4849,-34 157.485,-29.5001 152.4849,-34 157.4849,-34.0001 157.4849,-34.0001 157.4849,-34.0001 152.4849,-34 157.4849,-38.5001 147.4849,-34 147.4849,-34"/>
<polygon fill="#000000" stroke="#000000" points="183.1473,-34 173.1473,-38.5001 178.1473,-34 173.1473,-34.0001 173.1473,-34.0001 173.1473,-34.0001 178.1473,-34 173.1472,-29.5001 183.1473,-34 183.1473,-34"/>
</g>
</g>
</svg>
</p><p>&#x5BB9;&#x5668;&#x4E2D;&#x914D;&#x7F6E;&#x7F51;&#x5173;&#x4E3A;.9.1&#xFF0C;&#x53D1;&#x51FA;&#x53BB;&#x7684;&#x6570;&#x636E;&#x5305;&#x5148;&#x5230;&#x8FBE;br0&#xFF0C;&#x7136;&#x540E;&#x4EA4;&#x7ED9;host&#x673A;&#x5668;&#x7684;&#x534F;&#x8BAE;&#x6808;&#xFF0C;&#x7531;&#x4E8E;&#x76EE;&#x7684;IP&#x662F;&#x5916;&#x7F51;IP&#xFF0C;&#x4E14;host&#x673A;&#x5668;&#x5F00;&#x542F;&#x4E86;IP forward&#x529F;&#x80FD;&#xFF0C;&#x4E8E;&#x662F;&#x6570;&#x636E;&#x5305;&#x4F1A;&#x901A;&#x8FC7;eth0&#x53D1;&#x9001;&#x51FA;&#x53BB;&#xFF0C;&#x7531;&#x4E8E;.9.1&#x662F;&#x5185;&#x7F51;IP&#xFF0C;&#x6240;&#x4EE5;&#x4E00;&#x822C;&#x53D1;&#x51FA;&#x53BB;&#x4E4B;&#x524D;&#x4F1A;&#x5148;&#x505A;NAT&#x8F6C;&#x6362;&#xFF08;NAT&#x8F6C;&#x6362;&#x548C;IP forward&#x529F;&#x80FD;&#x90FD;&#x9700;&#x8981;&#x81EA;&#x5DF1;&#x914D;&#x7F6E;&#xFF09;&#x3002;&#x7531;&#x4E8E;&#x8981;&#x7ECF;&#x8FC7;host&#x673A;&#x5668;&#x7684;&#x534F;&#x8BAE;&#x6808;&#xFF0C;&#x5E76;&#x4E14;&#x8FD8;&#x8981;&#x505A;NAT&#x8F6C;&#x6362;&#xFF0C;&#x6240;&#x4EE5;&#x6027;&#x80FD;&#x6CA1;&#x6709;&#x4E0A;&#x9762;&#x865A;&#x62DF;&#x673A;&#x90A3;&#x79CD;&#x65B9;&#x6848;&#x597D;&#xFF0C;&#x4F18;&#x70B9;&#x662F;&#x5BB9;&#x5668;&#x5904;&#x4E8E;&#x5185;&#x7F51;&#x4E2D;&#xFF0C;&#x5B89;&#x5168;&#x6027;&#x76F8;&#x5BF9;&#x8981;&#x9AD8;&#x70B9;&#x3002;&#xFF08;&#x7531;&#x4E8E;&#x6570;&#x636E;&#x5305;&#x7EDF;&#x4E00;&#x7531;IP&#x5C42;&#x4ECE;eth0&#x8F6C;&#x53D1;&#x51FA;&#x53BB;&#xFF0C;&#x6240;&#x4EE5;&#x4E0D;&#x5B58;&#x5728;mac&#x5730;&#x5740;&#x7684;&#x95EE;&#x9898;&#xFF0C;&#x5728;&#x65E0;&#x7EBF;&#x7F51;&#x7EDC;&#x73AF;&#x5883;&#x4E0B;&#x4E5F;&#x5DE5;&#x4F5C;&#x826F;&#x597D;&#xFF09;</p>
</div></body></html>
    </div>
  </body>
</html>
